{"version":3,"file":"ManageCargoTypes-DetJ9MyU.js","sources":["../../src/pages/ManageCargoTypes.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { collection, addDoc, getDocs, doc, deleteDoc, updateDoc, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../firebase/config';\nimport { Package, ArrowLeft, PlusCircle, Edit, Trash2, AlertCircle, Check, X } from 'lucide-react';\nimport { toast } from 'react-toastify';\nimport { CargoType } from '../types';\nimport DashboardLayout from '../components/layout/DashboardLayout';\nimport Card from '../components/ui/Card';\nimport Button from '../components/ui/Button';\nimport LoadingSpinner from '../components/ui/LoadingSpinner';\nimport ErrorDisplay from '../components/ui/ErrorDisplay';\n\nconst ManageCargoTypes: React.FC = () => {\n  const navigate = useNavigate();\n  \n  // State for cargo types list\n  const [cargoTypes, setCargoTypes] = useState<CargoType[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  \n  // State for adding new cargo type\n  const [newCargoName, setNewCargoName] = useState('');\n  const [newCargoDescription, setNewCargoDescription] = useState('');\n  const [addingCargo, setAddingCargo] = useState(false);\n  \n  // State for editing cargo type\n  const [editingCargoId, setEditingCargoId] = useState<string | null>(null);\n  const [editCargoName, setEditCargoName] = useState('');\n  const [editCargoDescription, setEditCargoDescription] = useState('');\n\n  // Fetch cargo types on component mount\n  useEffect(() => {\n    fetchCargoTypes();\n  }, []);\n\n  const fetchCargoTypes = async () => {\n    try {\n      setLoading(true);\n      const cargoTypesSnapshot = await getDocs(collection(db, 'cargoTypes'));\n      const cargoTypesList = cargoTypesSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })) as CargoType[];\n      \n      setCargoTypes(cargoTypesList);\n    } catch (err) {\n      console.error('Error fetching cargo types:', err);\n      setError('Failed to load cargo types');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddCargoType = async () => {\n    if (!newCargoName.trim()) {\n      toast.error('Cargo type name is required');\n      return;\n    }\n    \n    try {\n      setAddingCargo(true);\n      \n      await addDoc(collection(db, 'cargoTypes'), {\n        name: newCargoName.trim(),\n        description: newCargoDescription.trim(),\n        createdAt: serverTimestamp()\n      });\n      \n      toast.success('Cargo type added successfully');\n      setNewCargoName('');\n      setNewCargoDescription('');\n      fetchCargoTypes();\n    } catch (err) {\n      console.error('Error adding cargo type:', err);\n      toast.error('Failed to add cargo type');\n    } finally {\n      setAddingCargo(false);\n    }\n  };\n\n  const startEditingCargo = (cargoType: CargoType) => {\n    setEditingCargoId(cargoType.id);\n    setEditCargoName(cargoType.name);\n    setEditCargoDescription(cargoType.description || '');\n  };\n\n  const cancelEditingCargo = () => {\n    setEditingCargoId(null);\n    setEditCargoName('');\n    setEditCargoDescription('');\n  };\n\n  const handleUpdateCargoType = async (id: string) => {\n    if (!editCargoName.trim()) {\n      toast.error('Cargo type name is required');\n      return;\n    }\n    \n    try {\n      await updateDoc(doc(db, 'cargoTypes', id), {\n        name: editCargoName.trim(),\n        description: editCargoDescription.trim(),\n        updatedAt: serverTimestamp()\n      });\n      \n      toast.success('Cargo type updated successfully');\n      setEditingCargoId(null);\n      fetchCargoTypes();\n    } catch (err) {\n      console.error('Error updating cargo type:', err);\n      toast.error('Failed to update cargo type');\n    }\n  };\n\n  const handleDeleteCargoType = async (id: string) => {\n    if (window.confirm('Are you sure you want to delete this cargo type?')) {\n      try {\n        await deleteDoc(doc(db, 'cargoTypes', id));\n        toast.success('Cargo type deleted successfully');\n        fetchCargoTypes();\n      } catch (err) {\n        console.error('Error deleting cargo type:', err);\n        toast.error('Failed to delete cargo type');\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Manage Cargo Types\">\n        <LoadingSpinner message=\"Loading cargo types...\" />\n      </DashboardLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout title=\"Manage Cargo Types\">\n        <ErrorDisplay message={error} />\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout\n      title=\"Manage Cargo Types\"\n      subtitle=\"Add and manage cargo types that will be available for ports to select when adding vessels\"\n      backLink=\"/admin\"\n      backLinkText=\"Back to Dashboard\"\n      icon={<Package className=\"h-6 w-6 text-seagreen-600\" />}\n    >\n      {/* Add New Cargo Type */}\n      <Card \n        title=\"Add New Cargo Type\" \n        icon={<Package className=\"h-6 w-6 text-seagreen-600\" />}\n        className=\"mb-6\"\n      >\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"md:col-span-1\">\n            <label htmlFor=\"cargoName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Cargo Type Name <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"cargoName\"\n              value={newCargoName}\n              onChange={(e) => setNewCargoName(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n              placeholder=\"e.g., Containers, Bulk Cargo\"\n              required\n            />\n          </div>\n\n          <div className=\"md:col-span-1\">\n            <label htmlFor=\"cargoDescription\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Description\n            </label>\n            <input\n              type=\"text\"\n              id=\"cargoDescription\"\n              value={newCargoDescription}\n              onChange={(e) => setNewCargoDescription(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n              placeholder=\"Optional description\"\n            />\n          </div>\n\n          <div className=\"md:col-span-1 flex items-end\">\n            <Button\n              type=\"button\"\n              onClick={handleAddCargoType}\n              disabled={addingCargo || !newCargoName.trim()}\n              loading={addingCargo}\n              icon={<PlusCircle className=\"h-4 w-4\" />}\n              fullWidth\n            >\n              Add Cargo Type\n            </Button>\n          </div>\n        </div>\n      </Card>\n\n      {/* Cargo Types List */}\n      <Card \n        title=\"Cargo Types List\" \n        icon={<Package className=\"h-6 w-6 text-seagreen-600\" />}\n      >\n        {cargoTypes.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <Package className=\"h-12 w-12 text-gray-400 mx-auto mb-3\" />\n            <h3 className=\"text-lg font-medium text-gray-900\">No cargo types added yet</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">Get started by adding your first cargo type</p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Cargo Type Name\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Description\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {cargoTypes.map((cargoType) => (\n                  <tr key={cargoType.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {editingCargoId === cargoType.id ? (\n                        <input\n                          type=\"text\"\n                          value={editCargoName}\n                          onChange={(e) => setEditCargoName(e.target.value)}\n                          className=\"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n                        />\n                      ) : (\n                        <div className=\"text-sm font-medium text-gray-900\">{cargoType.name}</div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {editingCargoId === cargoType.id ? (\n                        <input\n                          type=\"text\"\n                          value={editCargoDescription}\n                          onChange={(e) => setEditCargoDescription(e.target.value)}\n                          className=\"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n                        />\n                      ) : (\n                        <div className=\"text-sm text-gray-500\">{cargoType.description || '-'}</div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {editingCargoId === cargoType.id ? (\n                        <div className=\"flex space-x-2\">\n                          <button\n                            onClick={() => handleUpdateCargoType(cargoType.id!)}\n                            className=\"text-green-600 hover:text-green-900\"\n                            title=\"Save changes\"\n                          >\n                            <Check className=\"h-5 w-5\" />\n                          </button>\n                          <button\n                            onClick={cancelEditingCargo}\n                            className=\"text-red-600 hover:text-red-900\"\n                            title=\"Cancel\"\n                          >\n                            <X className=\"h-5 w-5\" />\n                          </button>\n                        </div>\n                      ) : (\n                        <div className=\"flex space-x-2\">\n                          <button\n                            onClick={() => startEditingCargo(cargoType)}\n                            className=\"text-seagreen-600 hover:text-seagreen-900\"\n                            title=\"Edit\"\n                          >\n                            <Edit className=\"h-5 w-5\" />\n                          </button>\n                          <button\n                            onClick={() => handleDeleteCargoType(cargoType.id!)}\n                            className=\"text-red-600 hover:text-red-900\"\n                            title=\"Delete\"\n                          >\n                            <Trash2 className=\"h-5 w-5\" />\n                          </button>\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </Card>\n    </DashboardLayout>\n  );\n};\n\nexport default ManageCargoTypes;"],"names":["ManageCargoTypes","useNavigate","cargoTypes","setCargoTypes","useState","loading","setLoading","error","setError","newCargoName","setNewCargoName","newCargoDescription","setNewCargoDescription","addingCargo","setAddingCargo","editingCargoId","setEditingCargoId","editCargoName","setEditCargoName","editCargoDescription","setEditCargoDescription","useEffect","fetchCargoTypes","cargoTypesList","getDocs","collection","db","doc","err","handleAddCargoType","toast","addDoc","serverTimestamp","startEditingCargo","cargoType","cancelEditingCargo","handleUpdateCargoType","id","updateDoc","handleDeleteCargoType","deleteDoc","jsx","DashboardLayout","LoadingSpinner","ErrorDisplay","jsxs","Package","Card","e","Button","PlusCircle","Check","X","Edit","Trash2"],"mappings":"qVAaA,MAAMA,GAA6B,IAAM,CACtBC,EAAA,EAGjB,KAAM,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAsB,CAAA,CAAE,EACtD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,EAAE,EAG/B,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAS,EAAE,EAC7C,CAACO,EAAqBC,CAAsB,EAAIR,EAAAA,SAAS,EAAE,EAC3D,CAACS,EAAaC,CAAc,EAAIV,EAAAA,SAAS,EAAK,EAG9C,CAACW,EAAgBC,CAAiB,EAAIZ,EAAAA,SAAwB,IAAI,EAClE,CAACa,EAAeC,CAAgB,EAAId,EAAAA,SAAS,EAAE,EAC/C,CAACe,EAAsBC,CAAuB,EAAIhB,EAAAA,SAAS,EAAE,EAGnEiB,EAAAA,UAAU,IAAM,CACdC,EAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMA,EAAkB,SAAY,CAClC,GAAI,CACFhB,EAAW,EAAI,EAEf,MAAMiB,GADqB,MAAMC,EAAQC,EAAWC,EAAI,YAAY,CAAC,GAC3B,KAAK,IAAIC,IAAQ,CACzD,GAAIA,EAAI,GACR,GAAGA,EAAI,KAAA,CAAK,EACZ,EAEFxB,EAAcoB,CAAc,CAC9B,OAASK,EAAK,CACZ,QAAQ,MAAM,8BAA+BA,CAAG,EAChDpB,EAAS,4BAA4B,CACvC,QAAA,CACEF,EAAW,EAAK,CAClB,CACF,EAEMuB,EAAqB,SAAY,CACrC,GAAI,CAACpB,EAAa,OAAQ,CACxBqB,EAAM,MAAM,6BAA6B,EACzC,MACF,CAEA,GAAI,CACFhB,EAAe,EAAI,EAEnB,MAAMiB,EAAON,EAAWC,EAAI,YAAY,EAAG,CACzC,KAAMjB,EAAa,KAAA,EACnB,YAAaE,EAAoB,KAAA,EACjC,UAAWqB,EAAA,CAAgB,CAC5B,EAEDF,EAAM,QAAQ,+BAA+B,EAC7CpB,EAAgB,EAAE,EAClBE,EAAuB,EAAE,EACzBU,EAAA,CACF,OAASM,EAAK,CACZ,QAAQ,MAAM,2BAA4BA,CAAG,EAC7CE,EAAM,MAAM,0BAA0B,CACxC,QAAA,CACEhB,EAAe,EAAK,CACtB,CACF,EAEMmB,EAAqBC,GAAyB,CAClDlB,EAAkBkB,EAAU,EAAE,EAC9BhB,EAAiBgB,EAAU,IAAI,EAC/Bd,EAAwBc,EAAU,aAAe,EAAE,CACrD,EAEMC,EAAqB,IAAM,CAC/BnB,EAAkB,IAAI,EACtBE,EAAiB,EAAE,EACnBE,EAAwB,EAAE,CAC5B,EAEMgB,EAAwB,MAAOC,GAAe,CAClD,GAAI,CAACpB,EAAc,OAAQ,CACzBa,EAAM,MAAM,6BAA6B,EACzC,MACF,CAEA,GAAI,CACF,MAAMQ,EAAUX,EAAID,EAAI,aAAcW,CAAE,EAAG,CACzC,KAAMpB,EAAc,KAAA,EACpB,YAAaE,EAAqB,KAAA,EAClC,UAAWa,EAAA,CAAgB,CAC5B,EAEDF,EAAM,QAAQ,iCAAiC,EAC/Cd,EAAkB,IAAI,EACtBM,EAAA,CACF,OAASM,EAAK,CACZ,QAAQ,MAAM,6BAA8BA,CAAG,EAC/CE,EAAM,MAAM,6BAA6B,CAC3C,CACF,EAEMS,EAAwB,MAAOF,GAAe,CAClD,GAAI,OAAO,QAAQ,kDAAkD,EACnE,GAAI,CACF,MAAMG,EAAUb,EAAID,EAAI,aAAcW,CAAE,CAAC,EACzCP,EAAM,QAAQ,iCAAiC,EAC/CR,EAAA,CACF,OAASM,EAAK,CACZ,QAAQ,MAAM,6BAA8BA,CAAG,EAC/CE,EAAM,MAAM,6BAA6B,CAC3C,CAEJ,EAEA,OAAIzB,EAEAoC,MAACC,GAAgB,MAAM,qBACrB,eAACC,EAAA,CAAe,QAAQ,yBAAyB,CAAA,CACnD,EAIApC,EAEAkC,MAACC,GAAgB,MAAM,qBACrB,eAACE,EAAA,CAAa,QAASrC,EAAO,CAAA,CAChC,EAKFsC,EAAAA,KAACH,EAAA,CACC,MAAM,qBACN,SAAS,4FACT,SAAS,SACT,aAAa,oBACb,KAAMD,EAAAA,IAACK,EAAA,CAAQ,UAAU,2BAAA,CAA4B,EAGrD,SAAA,CAAAL,EAAAA,IAACM,EAAA,CACC,MAAM,qBACN,KAAMN,EAAAA,IAACK,EAAA,CAAQ,UAAU,2BAAA,CAA4B,EACrD,UAAU,OAEV,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,QAAQ,YAAY,UAAU,+CAA+C,SAAA,CAAA,mBAClEJ,EAAAA,IAAC,OAAA,CAAK,UAAU,eAAe,SAAA,GAAA,CAAC,CAAA,EAClD,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,GAAG,YACH,MAAOhC,EACP,SAAWuC,GAAMtC,EAAgBsC,EAAE,OAAO,KAAK,EAC/C,UAAU,6GACV,YAAY,+BACZ,SAAQ,EAAA,CAAA,CACV,EACF,EAEAH,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAJ,MAAC,QAAA,CAAM,QAAQ,mBAAmB,UAAU,+CAA+C,SAAA,cAE3F,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,GAAG,mBACH,MAAO9B,EACP,SAAWqC,GAAMpC,EAAuBoC,EAAE,OAAO,KAAK,EACtD,UAAU,6GACV,YAAY,sBAAA,CAAA,CACd,EACF,EAEAP,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAAA,IAACQ,EAAA,CACC,KAAK,SACL,QAASpB,EACT,SAAUhB,GAAe,CAACJ,EAAa,KAAA,EACvC,QAASI,EACT,KAAM4B,EAAAA,IAACS,EAAA,CAAW,UAAU,SAAA,CAAU,EACtC,UAAS,GACV,SAAA,gBAAA,CAAA,CAED,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAIFT,EAAAA,IAACM,EAAA,CACC,MAAM,mBACN,KAAMN,EAAAA,IAACK,EAAA,CAAQ,UAAU,2BAAA,CAA4B,EAEpD,WAAW,SAAW,EACrBD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAJ,EAAAA,IAACK,EAAA,CAAQ,UAAU,sCAAA,CAAuC,EAC1DL,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,2BAAwB,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,6CAAA,CAA2C,CAAA,CAAA,CACvF,QAEC,MAAA,CAAI,UAAU,kBACb,SAAAI,EAAAA,KAAC,QAAA,CAAM,UAAU,sCACf,SAAA,CAAAJ,MAAC,QAAA,CAAM,UAAU,aACf,SAAAI,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAJ,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,kBAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,cAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,SAAA,CAE/F,CAAA,CAAA,CACF,CAAA,CACF,EACAA,EAAAA,IAAC,QAAA,CAAM,UAAU,oCACd,SAAAvC,EAAW,IAAKgC,GACfW,EAAAA,KAAC,KAAA,CAAsB,UAAU,mBAC/B,SAAA,CAAAJ,MAAC,KAAA,CAAG,UAAU,8BACX,SAAA1B,IAAmBmB,EAAU,GAC5BO,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOxB,EACP,SAAW+B,GAAM9B,EAAiB8B,EAAE,OAAO,KAAK,EAChD,UAAU,4GAAA,CAAA,EAGZP,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,SAAAP,EAAU,KAAK,EAEvE,QACC,KAAA,CAAG,UAAU,8BACX,SAAAnB,IAAmBmB,EAAU,GAC5BO,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOtB,EACP,SAAW6B,GAAM5B,EAAwB4B,EAAE,OAAO,KAAK,EACvD,UAAU,4GAAA,CAAA,QAGX,MAAA,CAAI,UAAU,wBAAyB,SAAAd,EAAU,aAAe,IAAI,EAEzE,EACAO,EAAAA,IAAC,KAAA,CAAG,UAAU,oDACX,SAAA1B,IAAmBmB,EAAU,GAC5BW,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAJ,EAAAA,IAAC,SAAA,CACC,QAAS,IAAML,EAAsBF,EAAU,EAAG,EAClD,UAAU,sCACV,MAAM,eAEN,SAAAO,EAAAA,IAACU,EAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,EAE7BV,EAAAA,IAAC,SAAA,CACC,QAASN,EACT,UAAU,kCACV,MAAM,SAEN,SAAAM,EAAAA,IAACW,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,CAAA,CACF,EAEAP,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAJ,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMR,EAAkBC,CAAS,EAC1C,UAAU,4CACV,MAAM,OAEN,SAAAO,EAAAA,IAACY,EAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,EAE5BZ,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMF,EAAsBL,EAAU,EAAG,EAClD,UAAU,kCACV,MAAM,SAEN,SAAAO,EAAAA,IAACa,EAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,CAEJ,CAAA,GA7DOpB,EAAU,EA8DnB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAGN"}