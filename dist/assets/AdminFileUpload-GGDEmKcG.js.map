{"version":3,"file":"AdminFileUpload-GGDEmKcG.js","sources":["../../src/pages/AdminFileUpload.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Upload, Download, Eye, Trash2, Edit2, File, Calendar, AlertCircle, Save, X } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\nimport { fetchPorts } from '../services/api';\r\nimport { uploadFile, fetchFiles, deleteFile, updateFileDescription } from '../services/api';\r\nimport { Port, UploadedFile } from '../types';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport Button from '../components/ui/Button';\r\nimport LoadingSpinner from '../components/ui/LoadingSpinner';\r\nimport Card from '../components/ui/Card';\r\n\r\nconst AdminFileUpload: React.FC = () => {\r\n  const { currentUser } = useAuth();\r\n  const [ports, setPorts] = useState<Port[]>([]);\r\n  const [selectedPortId, setSelectedPortId] = useState<string>('');\r\n  const [selectedYear, setSelectedYear] = useState<number>(new Date().getFullYear());\r\n  const [selectedMonth, setSelectedMonth] = useState<number>(new Date().getMonth() + 1);\r\n  const [files, setFiles] = useState<UploadedFile[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [fileInput, setFileInput] = useState<File | null>(null);\r\n  const [description, setDescription] = useState('');\r\n  const [editingFileId, setEditingFileId] = useState<string | null>(null);\r\n  const [editDescription, setEditDescription] = useState('');\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const months = [\r\n    'January', 'February', 'March', 'April', 'May', 'June',\r\n    'July', 'August', 'September', 'October', 'November', 'December'\r\n  ];\r\n\r\n  const years = Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - i);\r\n\r\n  useEffect(() => {\r\n    loadPorts();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedPortId && selectedYear && selectedMonth) {\r\n      loadFiles();\r\n    } else {\r\n      setFiles([]);\r\n    }\r\n  }, [selectedPortId, selectedYear, selectedMonth]);\r\n\r\n  const loadPorts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const portsData = await fetchPorts();\r\n      setPorts(portsData);\r\n    } catch (error) {\r\n      console.error('Error loading ports:', error);\r\n      toast.error('Failed to load ports');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadFiles = async () => {\r\n    if (!selectedPortId) return;\r\n    try {\r\n      setLoading(true);\r\n      const filesData = await fetchFiles(selectedPortId, selectedYear, selectedMonth);\r\n      setFiles(filesData);\r\n    } catch (error) {\r\n      console.error('Error loading files:', error);\r\n      toast.error('Failed to load files');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    // Validate file size (max 10MB)\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      toast.error('File size must be less than 10MB');\r\n      return;\r\n    }\r\n\r\n    setFileInput(file);\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedPortId) {\r\n      toast.error('Please select a port');\r\n      return;\r\n    }\r\n\r\n    if (!fileInput) {\r\n      toast.error('Please select a file');\r\n      return;\r\n    }\r\n\r\n    if (!currentUser) {\r\n      toast.error('User not authenticated');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setUploading(true);\r\n      await uploadFile(\r\n        selectedPortId,\r\n        selectedYear,\r\n        selectedMonth,\r\n        fileInput,\r\n        description,\r\n        currentUser.uid\r\n      );\r\n      toast.success('File uploaded successfully');\r\n      setFileInput(null);\r\n      setDescription('');\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      await loadFiles();\r\n    } catch (error: any) {\r\n      console.error('Error uploading file:', error);\r\n      const errorMessage = error?.message || 'Failed to upload file';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (file: UploadedFile) => {\r\n    if (!selectedPortId) return;\r\n    \r\n    if (!window.confirm(`Are you sure you want to delete \"${file.originalFileName}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteFile(selectedPortId, selectedYear, selectedMonth, file.id, file.url, file.storagePath);\r\n      toast.success('File deleted successfully');\r\n      await loadFiles();\r\n    } catch (error) {\r\n      console.error('Error deleting file:', error);\r\n      toast.error('Failed to delete file');\r\n    }\r\n  };\r\n\r\n  const handleEditStart = (file: UploadedFile) => {\r\n    setEditingFileId(file.id);\r\n    setEditDescription(file.description || '');\r\n  };\r\n\r\n  const handleEditCancel = () => {\r\n    setEditingFileId(null);\r\n    setEditDescription('');\r\n  };\r\n\r\n  const handleEditSave = async (fileId: string) => {\r\n    if (!selectedPortId) return;\r\n\r\n    try {\r\n      await updateFileDescription(selectedPortId, selectedYear, selectedMonth, fileId, editDescription);\r\n      toast.success('File description updated successfully');\r\n      setEditingFileId(null);\r\n      setEditDescription('');\r\n      await loadFiles();\r\n    } catch (error) {\r\n      console.error('Error updating file description:', error);\r\n      toast.error('Failed to update file description');\r\n    }\r\n  };\r\n\r\n  const handleDownload = (file: UploadedFile) => {\r\n    const link = document.createElement('a');\r\n    link.href = file.url;\r\n    link.download = file.originalFileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const formatDate = (timestamp: any) => {\r\n    if (!timestamp) return 'N/A';\r\n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout title=\"Upload Files\" subtitle=\"Manage files by Port, Year, and Month\">\r\n      <div className=\"space-y-6\">\r\n        {/* Selection Section */}\r\n        <Card title=\"Select Port, Year & Month\" icon={<Calendar className=\"h-6 w-6 text-seagreen-600\" />}>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Port\r\n              </label>\r\n              <select\r\n                value={selectedPortId}\r\n                onChange={(e) => setSelectedPortId(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n              >\r\n                <option value=\"\">Select Port</option>\r\n                {ports.map((port) => (\r\n                  <option key={port.id} value={port.id}>\r\n                    {port.portName}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Year\r\n              </label>\r\n              <select\r\n                value={selectedYear}\r\n                onChange={(e) => setSelectedYear(Number(e.target.value))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n              >\r\n                {years.map((year) => (\r\n                  <option key={year} value={year}>\r\n                    {year}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Month\r\n              </label>\r\n              <select\r\n                value={selectedMonth}\r\n                onChange={(e) => setSelectedMonth(Number(e.target.value))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n              >\r\n                {months.map((month, index) => (\r\n                  <option key={index + 1} value={index + 1}>\r\n                    {month}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Upload Section */}\r\n        {selectedPortId && (\r\n          <Card title=\"Upload New File\" icon={<Upload className=\"h-6 w-6 text-seagreen-600\" />}>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  File Description\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={description}\r\n                  onChange={(e) => setDescription(e.target.value)}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n                  placeholder=\"Enter file description (optional)\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Select File\r\n                </label>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n                />\r\n                {fileInput && (\r\n                  <p className=\"mt-2 text-sm text-gray-600\">\r\n                    Selected: {fileInput.name} ({formatFileSize(fileInput.size)})\r\n                  </p>\r\n                )}\r\n                <p className=\"mt-2 text-xs text-gray-500\">\r\n                  Max file size: 10MB\r\n                </p>\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handleUpload}\r\n                disabled={!fileInput || uploading}\r\n                loading={uploading}\r\n                icon={<Upload className=\"h-4 w-4\" />}\r\n              >\r\n                {uploading ? 'Uploading...' : 'Upload File'}\r\n              </Button>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Files List */}\r\n        {selectedPortId && (\r\n          <Card \r\n            title={`Uploaded Files - ${months[selectedMonth - 1]} ${selectedYear}`}\r\n            icon={<File className=\"h-6 w-6 text-seagreen-600\" />}\r\n          >\r\n            {loading ? (\r\n              <LoadingSpinner message=\"Loading files...\" />\r\n            ) : files.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <File className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                <p className=\"text-gray-600\">No files uploaded for this period</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {files.map((file) => (\r\n                  <div\r\n                    key={file.id}\r\n                    className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between gap-4\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <File className=\"h-5 w-5 text-seagreen-600 flex-shrink-0\" />\r\n                          <h4 className=\"font-semibold text-gray-900 truncate\">\r\n                            {file.originalFileName}\r\n                          </h4>\r\n                        </div>\r\n                        \r\n                        {editingFileId === file.id ? (\r\n                          <div className=\"flex items-center gap-2 mb-2\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={editDescription}\r\n                              onChange={(e) => setEditDescription(e.target.value)}\r\n                              className=\"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n                              placeholder=\"Enter description\"\r\n                            />\r\n                            <button\r\n                              onClick={() => handleEditSave(file.id)}\r\n                              className=\"p-1.5 text-seagreen-600 hover:bg-seagreen-50 rounded\"\r\n                              title=\"Save\"\r\n                            >\r\n                              <Save className=\"h-4 w-4\" />\r\n                            </button>\r\n                            <button\r\n                              onClick={handleEditCancel}\r\n                              className=\"p-1.5 text-gray-600 hover:bg-gray-50 rounded\"\r\n                              title=\"Cancel\"\r\n                            >\r\n                              <X className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        ) : (\r\n                          <p className=\"text-sm text-gray-600 mb-2\">\r\n                            {file.description || 'No description'}\r\n                          </p>\r\n                        )}\r\n\r\n                        <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n                          <span>{formatFileSize(file.fileSize)}</span>\r\n                          <span>â€¢</span>\r\n                          <span>Uploaded {formatDate(file.uploadedAt)}</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                        <a\r\n                          href={file.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"p-2 text-seagreen-600 hover:bg-seagreen-50 rounded-lg transition-colors\"\r\n                          title=\"View\"\r\n                        >\r\n                          <Eye className=\"h-5 w-5\" />\r\n                        </a>\r\n                        <button\r\n                          onClick={() => handleDownload(file)}\r\n                          className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                          title=\"Download\"\r\n                        >\r\n                          <Download className=\"h-5 w-5\" />\r\n                        </button>\r\n                        {editingFileId !== file.id && (\r\n                          <button\r\n                            onClick={() => handleEditStart(file)}\r\n                            className=\"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors\"\r\n                            title=\"Edit\"\r\n                          >\r\n                            <Edit2 className=\"h-5 w-5\" />\r\n                          </button>\r\n                        )}\r\n                        <button\r\n                          onClick={() => handleDelete(file)}\r\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                          title=\"Delete\"\r\n                        >\r\n                          <Trash2 className=\"h-5 w-5\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </Card>\r\n        )}\r\n\r\n        {!selectedPortId && (\r\n          <div className=\"bg-seagreen-50 border border-seagreen-200 rounded-lg p-4\">\r\n            <div className=\"flex\">\r\n              <AlertCircle className=\"h-6 w-6 text-seagreen-600 mr-3 flex-shrink-0\" />\r\n              <div>\r\n                <h3 className=\"font-medium text-seagreen-800\">Select Port, Year & Month</h3>\r\n                <p className=\"mt-1 text-sm text-seagreen-700\">\r\n                  Please select a port, year, and month to upload and manage files.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n};\r\n\r\nexport default AdminFileUpload;\r\n\r\n"],"names":["AdminFileUpload","currentUser","useAuth","ports","setPorts","useState","selectedPortId","setSelectedPortId","selectedYear","setSelectedYear","selectedMonth","setSelectedMonth","files","setFiles","loading","setLoading","uploading","setUploading","fileInput","setFileInput","description","setDescription","editingFileId","setEditingFileId","editDescription","setEditDescription","fileInputRef","useRef","months","years","_","i","useEffect","loadPorts","loadFiles","portsData","fetchPorts","error","toast","filesData","fetchFiles","handleFileSelect","e","file","_a","handleUpload","uploadFile","errorMessage","handleDelete","deleteFile","handleEditStart","handleEditCancel","handleEditSave","fileId","updateFileDescription","handleDownload","link","formatFileSize","bytes","k","sizes","formatDate","timestamp","date","jsx","DashboardLayout","jsxs","Card","Calendar","port","year","month","index","Upload","Button","File","LoadingSpinner","Save","X","Eye","Download","Edit2","Trash2","AlertCircle"],"mappings":"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"}