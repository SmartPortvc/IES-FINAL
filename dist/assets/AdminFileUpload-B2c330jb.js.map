{"version":3,"file":"AdminFileUpload-B2c330jb.js","sources":["../../src/pages/AdminFileUpload.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Upload, Download, Eye, Trash2, Edit2, File, Calendar, AlertCircle, Save, X } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\nimport { fetchPorts } from '../services/api';\r\nimport { uploadFile, fetchFiles, deleteFile, updateFileDescription } from '../services/api';\r\nimport { Port, UploadedFile } from '../types';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport Button from '../components/ui/Button';\r\nimport LoadingSpinner from '../components/ui/LoadingSpinner';\r\nimport Card from '../components/ui/Card';\r\n\r\nconst AdminFileUpload: React.FC = () => {\r\n  const { currentUser } = useAuth();\r\n  const [ports, setPorts] = useState<Port[]>([]);\r\n  const [selectedPortId, setSelectedPortId] = useState<string>('');\r\n  const [selectedYear, setSelectedYear] = useState<number>(new Date().getFullYear());\r\n  const [selectedMonth, setSelectedMonth] = useState<number>(new Date().getMonth() + 1);\r\n  const [files, setFiles] = useState<UploadedFile[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [fileInput, setFileInput] = useState<File | null>(null);\r\n  const [description, setDescription] = useState('');\r\n  const [editingFileId, setEditingFileId] = useState<string | null>(null);\r\n  const [editDescription, setEditDescription] = useState('');\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const months = [\r\n    'January', 'February', 'March', 'April', 'May', 'June',\r\n    'July', 'August', 'September', 'October', 'November', 'December'\r\n  ];\r\n\r\n  const years = Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - i);\r\n\r\n  useEffect(() => {\r\n    loadPorts();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedPortId && selectedYear && selectedMonth) {\r\n      loadFiles();\r\n    } else {\r\n      setFiles([]);\r\n    }\r\n  }, [selectedPortId, selectedYear, selectedMonth]);\r\n\r\n  const loadPorts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const portsData = await fetchPorts();\r\n      setPorts(portsData);\r\n    } catch (error) {\r\n      console.error('Error loading ports:', error);\r\n      toast.error('Failed to load ports');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadFiles = async () => {\r\n    if (!selectedPortId) return;\r\n    try {\r\n      setLoading(true);\r\n      const filesData = await fetchFiles(selectedPortId, selectedYear, selectedMonth);\r\n      setFiles(filesData);\r\n    } catch (error) {\r\n      console.error('Error loading files:', error);\r\n      toast.error('Failed to load files');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    // Validate file size (max 10MB)\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      toast.error('File size must be less than 10MB');\r\n      return;\r\n    }\r\n\r\n    setFileInput(file);\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedPortId) {\r\n      toast.error('Please select a port');\r\n      return;\r\n    }\r\n\r\n    if (!fileInput) {\r\n      toast.error('Please select a file');\r\n      return;\r\n    }\r\n\r\n    if (!currentUser) {\r\n      toast.error('User not authenticated');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setUploading(true);\r\n      await uploadFile(\r\n        selectedPortId,\r\n        selectedYear,\r\n        selectedMonth,\r\n        fileInput,\r\n        description,\r\n        currentUser.uid\r\n      );\r\n      toast.success('File uploaded successfully');\r\n      setFileInput(null);\r\n      setDescription('');\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      await loadFiles();\r\n    } catch (error: any) {\r\n      console.error('Error uploading file:', error);\r\n      const errorMessage = error?.message || 'Failed to upload file';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (file: UploadedFile) => {\r\n    if (!selectedPortId) return;\r\n    \r\n    if (!window.confirm(`Are you sure you want to delete \"${file.originalFileName}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteFile(selectedPortId, selectedYear, selectedMonth, file.id, file.url, file.storagePath);\r\n      toast.success('File deleted successfully');\r\n      await loadFiles();\r\n    } catch (error) {\r\n      console.error('Error deleting file:', error);\r\n      toast.error('Failed to delete file');\r\n    }\r\n  };\r\n\r\n  const handleEditStart = (file: UploadedFile) => {\r\n    setEditingFileId(file.id);\r\n    setEditDescription(file.description || '');\r\n  };\r\n\r\n  const handleEditCancel = () => {\r\n    setEditingFileId(null);\r\n    setEditDescription('');\r\n  };\r\n\r\n  const handleEditSave = async (fileId: string) => {\r\n    if (!selectedPortId) return;\r\n\r\n    try {\r\n      await updateFileDescription(selectedPortId, selectedYear, selectedMonth, fileId, editDescription);\r\n      toast.success('File description updated successfully');\r\n      setEditingFileId(null);\r\n      setEditDescription('');\r\n      await loadFiles();\r\n    } catch (error) {\r\n      console.error('Error updating file description:', error);\r\n      toast.error('Failed to update file description');\r\n    }\r\n  };\r\n\r\n  const handleDownload = (file: UploadedFile) => {\r\n    const link = document.createElement('a');\r\n    link.href = file.url;\r\n    link.download = file.originalFileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const formatDate = (timestamp: any) => {\r\n    if (!timestamp) return 'N/A';\r\n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout title=\"Upload Files\" subtitle=\"Manage files by Port, Year, and Month\">\r\n      <div className=\"space-y-6\">\r\n        {/* Selection Section */}\r\n        <Card title=\"Select Port, Year & Month\" icon={<Calendar className=\"h-6 w-6 text-seagreen-600\" />}>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Port\r\n              </label>\r\n              <select\r\n                value={selectedPortId}\r\n                onChange={(e) => setSelectedPortId(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n              >\r\n                <option value=\"\">Select Port</option>\r\n                {ports.map((port) => (\r\n                  <option key={port.id} value={port.id}>\r\n                    {port.portName}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Year\r\n              </label>\r\n              <select\r\n                value={selectedYear}\r\n                onChange={(e) => setSelectedYear(Number(e.target.value))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n              >\r\n                {years.map((year) => (\r\n                  <option key={year} value={year}>\r\n                    {year}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Month\r\n              </label>\r\n              <select\r\n                value={selectedMonth}\r\n                onChange={(e) => setSelectedMonth(Number(e.target.value))}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n              >\r\n                {months.map((month, index) => (\r\n                  <option key={index + 1} value={index + 1}>\r\n                    {month}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Upload Section */}\r\n        {selectedPortId && (\r\n          <Card title=\"Upload New File\" icon={<Upload className=\"h-6 w-6 text-seagreen-600\" />}>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  File Description\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={description}\r\n                  onChange={(e) => setDescription(e.target.value)}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n                  placeholder=\"Enter file description (optional)\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Select File\r\n                </label>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n                />\r\n                {fileInput && (\r\n                  <p className=\"mt-2 text-sm text-gray-600\">\r\n                    Selected: {fileInput.name} ({formatFileSize(fileInput.size)})\r\n                  </p>\r\n                )}\r\n                <p className=\"mt-2 text-xs text-gray-500\">\r\n                  Max file size: 10MB\r\n                </p>\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handleUpload}\r\n                disabled={!fileInput || uploading}\r\n                loading={uploading}\r\n                icon={<Upload className=\"h-4 w-4\" />}\r\n              >\r\n                {uploading ? 'Uploading...' : 'Upload File'}\r\n              </Button>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Files List */}\r\n        {selectedPortId && (\r\n          <Card \r\n            title={`Uploaded Files - ${months[selectedMonth - 1]} ${selectedYear}`}\r\n            icon={<File className=\"h-6 w-6 text-seagreen-600\" />}\r\n          >\r\n            {loading ? (\r\n              <LoadingSpinner message=\"Loading files...\" />\r\n            ) : files.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <File className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                <p className=\"text-gray-600\">No files uploaded for this period</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {files.map((file) => (\r\n                  <div\r\n                    key={file.id}\r\n                    className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between gap-4\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <File className=\"h-5 w-5 text-seagreen-600 flex-shrink-0\" />\r\n                          <h4 className=\"font-semibold text-gray-900 truncate\">\r\n                            {file.originalFileName}\r\n                          </h4>\r\n                        </div>\r\n                        \r\n                        {editingFileId === file.id ? (\r\n                          <div className=\"flex items-center gap-2 mb-2\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={editDescription}\r\n                              onChange={(e) => setEditDescription(e.target.value)}\r\n                              className=\"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500\"\r\n                              placeholder=\"Enter description\"\r\n                            />\r\n                            <button\r\n                              onClick={() => handleEditSave(file.id)}\r\n                              className=\"p-1.5 text-seagreen-600 hover:bg-seagreen-50 rounded\"\r\n                              title=\"Save\"\r\n                            >\r\n                              <Save className=\"h-4 w-4\" />\r\n                            </button>\r\n                            <button\r\n                              onClick={handleEditCancel}\r\n                              className=\"p-1.5 text-gray-600 hover:bg-gray-50 rounded\"\r\n                              title=\"Cancel\"\r\n                            >\r\n                              <X className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        ) : (\r\n                          <p className=\"text-sm text-gray-600 mb-2\">\r\n                            {file.description || 'No description'}\r\n                          </p>\r\n                        )}\r\n\r\n                        <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n                          <span>{formatFileSize(file.fileSize)}</span>\r\n                          <span>â€¢</span>\r\n                          <span>Uploaded {formatDate(file.uploadedAt)}</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                        <a\r\n                          href={file.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"p-2 text-seagreen-600 hover:bg-seagreen-50 rounded-lg transition-colors\"\r\n                          title=\"View\"\r\n                        >\r\n                          <Eye className=\"h-5 w-5\" />\r\n                        </a>\r\n                        <button\r\n                          onClick={() => handleDownload(file)}\r\n                          className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                          title=\"Download\"\r\n                        >\r\n                          <Download className=\"h-5 w-5\" />\r\n                        </button>\r\n                        {editingFileId !== file.id && (\r\n                          <button\r\n                            onClick={() => handleEditStart(file)}\r\n                            className=\"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors\"\r\n                            title=\"Edit\"\r\n                          >\r\n                            <Edit2 className=\"h-5 w-5\" />\r\n                          </button>\r\n                        )}\r\n                        <button\r\n                          onClick={() => handleDelete(file)}\r\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                          title=\"Delete\"\r\n                        >\r\n                          <Trash2 className=\"h-5 w-5\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </Card>\r\n        )}\r\n\r\n        {!selectedPortId && (\r\n          <div className=\"bg-seagreen-50 border border-seagreen-200 rounded-lg p-4\">\r\n            <div className=\"flex\">\r\n              <AlertCircle className=\"h-6 w-6 text-seagreen-600 mr-3 flex-shrink-0\" />\r\n              <div>\r\n                <h3 className=\"font-medium text-seagreen-800\">Select Port, Year & Month</h3>\r\n                <p className=\"mt-1 text-sm text-seagreen-700\">\r\n                  Please select a port, year, and month to upload and manage files.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n};\r\n\r\nexport default AdminFileUpload;\r\n\r\n"],"names":["AdminFileUpload","currentUser","useAuth","ports","setPorts","useState","selectedPortId","setSelectedPortId","selectedYear","setSelectedYear","selectedMonth","setSelectedMonth","files","setFiles","loading","setLoading","uploading","setUploading","fileInput","setFileInput","description","setDescription","editingFileId","setEditingFileId","editDescription","setEditDescription","fileInputRef","useRef","months","years","_","i","useEffect","loadPorts","loadFiles","portsData","fetchPorts","error","toast","filesData","fetchFiles","handleFileSelect","e","file","_a","handleUpload","uploadFile","errorMessage","handleDelete","deleteFile","handleEditStart","handleEditCancel","handleEditSave","fileId","updateFileDescription","handleDownload","link","formatFileSize","bytes","k","sizes","formatDate","timestamp","date","jsx","DashboardLayout","jsxs","Card","Calendar","port","year","month","index","Upload","Button","File","LoadingSpinner","Save","X","Eye","Download","Edit2","Trash2","AlertCircle"],"mappings":"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"}