{"version":3,"file":"VesselList-XP8QIrO5.js","sources":["../../src/components/vessel/VesselList.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, memo, useEffect } from \"react\";\nimport {\n  Ship,\n  Calendar,\n  Package,\n  Navigation,\n  ExternalLink,\n  DollarSign,\n} from \"lucide-react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Vessel } from \"../../types\";\nimport Card from \"../ui/Card\";\nimport LoadingSpinner from \"../ui/LoadingSpinner\";\nimport ErrorDisplay from \"../ui/ErrorDisplay\";\nimport Button from \"../ui/Button\";\nimport SearchFilter from \"../ui/SearchFilter\";\nimport DateRangePicker from \"../ui/DateRangePicker\";\nimport StatusBadge from \"../ui/StatusBadge\";\nimport { formatDateTime, formatCurrency } from \"../../utils/formatters\";\nimport {\n  WeeklySummary,\n  exportPortWiseSummaryAndReports,\n  PortSummaryData,\n} from \"../../utils/excelExport\";\n\ninterface DailyCargoDetail {\n  date?: Date | string;\n  cargoType?: string;\n  cargoTypeInDetail?: string;\n  quantity?: string;\n  demurrageCharges?: string;\n  reason?: string;\n}\n\ninterface VesselWithPortName extends Vessel {\n  portName?: string;\n  dailyCargoDetails?: DailyCargoDetail[];\n}\n\ninterface VesselListProps {\n  vessels: VesselWithPortName[];\n  loading: boolean;\n  error: string | null;\n  portName?: string;\n  showExport?: boolean;\n  portId?: string;\n}\n\nconst VesselList: React.FC<VesselListProps> = ({\n  vessels,\n  loading,\n  error,\n  portName,\n  showExport = false,\n}) => {\n  const navigate = useNavigate();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [filterType, setFilterType] = useState<\n    \"all\" | \"Import\" | \"Export\" | \"Coastal\"\n  >(\"all\");\n  const [fromDate, setFromDate] = useState(\"\");\n  const [toDate, setToDate] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n\n  const handleViewDetails = useCallback(\n    (vesselId: string) => {\n      navigate(`/vessel-details/${vesselId}`);\n    },\n    [navigate]\n  );\n\n  const filteredVessels = useMemo(() => {\n    return vessels.filter((vessel) => {\n      const searchLower = searchTerm.toLowerCase();\n      const matchesSearch =\n        (vessel.vesselName?.toLowerCase().includes(searchLower) ?? false) ||\n        (vessel.imo?.toLowerCase().includes(searchLower) ?? false) ||\n        (vessel.arrivalFrom?.toLowerCase().includes(searchLower) ?? false) ||\n        (vessel.cargo?.type?.toLowerCase().includes(searchLower) ?? false) ||\n        (vessel.portName?.toLowerCase().includes(searchLower) ?? false);\n\n      const matchesType =\n        filterType === \"all\" || vessel.operationType === filterType;\n\n      let matchesDateRange = true;\n      if (fromDate || toDate) {\n        const arrivalDate = vessel.arrivalDateTime;\n        if (arrivalDate) {\n          let vesselDate: Date;\n\n          if (typeof arrivalDate === 'string') {\n            vesselDate = new Date(arrivalDate);\n          } else if (arrivalDate instanceof Date) {\n            vesselDate = arrivalDate;\n          } else if (arrivalDate && typeof arrivalDate === 'object' && 'seconds' in arrivalDate) {\n            vesselDate = new Date((arrivalDate as any).seconds * 1000);\n          } else {\n            matchesDateRange = false;\n            return false;\n          }\n\n          if (fromDate) {\n            const from = new Date(fromDate);\n            from.setHours(0, 0, 0, 0);\n            if (vesselDate < from) {\n              matchesDateRange = false;\n            }\n          }\n\n          if (toDate && matchesDateRange) {\n            const to = new Date(toDate);\n            to.setHours(23, 59, 59, 999);\n            if (vesselDate > to) {\n              matchesDateRange = false;\n            }\n          }\n        } else {\n          matchesDateRange = false;\n        }\n      }\n\n      return matchesSearch && matchesType && matchesDateRange;\n    });\n  }, [vessels, searchTerm, filterType, fromDate, toDate]);\n\n  const totalPages = Math.ceil(filteredVessels.length / pageSize);\n\n  const paginatedVessels = useMemo(() => {\n    const startIndex = (currentPage - 1) * pageSize;\n    const endIndex = startIndex + pageSize;\n    return filteredVessels.slice(startIndex, endIndex);\n  }, [filteredVessels, currentPage, pageSize]);\n\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handlePageSizeChange = (size: number) => {\n    setPageSize(size);\n    setCurrentPage(1);\n  };\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchTerm, filterType, fromDate, toDate]);\n\n  console.log({\n    vessels: vessels.filter((vessel) => vessel.imo === \"12341234\"),\n  });\n\n  function getCargoSumsByType(data: VesselWithPortName[]) {\n    const cargoSums = {\n      Container: 0,\n      \"Break Bulk\": 0,\n      Project: 0,\n      \"Liquid Bulk\": 0,\n      \"Dry Bulk\": 0,\n    };\n\n    for (const vessel of data) {\n      if (!vessel.clearanceIssuedOn) continue;\n\n      for (const entry of vessel.dailyCargoDetails || []) {\n        const type = entry.cargoTypeInDetail;\n        const quantity = parseFloat(entry.quantity || \"0\");\n\n        if (!isNaN(quantity) && type && type in cargoSums) {\n          (cargoSums as Record<string, number>)[type] += quantity;\n        }\n      }\n    }\n\n    return cargoSums;\n  }\n\n  interface DailyCargoDetail {\n    demurrageCharges?: string;\n    quantity?: string;\n  }\n\n  interface VesselDemurrageSummary {\n    vesselName: string;\n    totalDemurrage: number;\n  }\n\n  function calculateTotalDemurrage(\n    vessels: VesselWithPortName[]\n  ): VesselDemurrageSummary[] {\n    return vessels.map((vessel) => {\n      const totalDemurrage =\n        vessel.dailyCargoDetails?.reduce(\n          (sum: number, cargo: DailyCargoDetail) => {\n            const charge = parseFloat(cargo.demurrageCharges || \"0\") || 0;\n            return sum + charge;\n          },\n          0\n        ) || 0;\n\n      return {\n        vesselName: vessel.vesselName,\n        totalDemurrage,\n      };\n    });\n  }\n\n  interface VesselTotalSummary {\n    vesselName: string;\n    totalQuantity: number;\n  }\n\n  function calculateTotalQuantity(\n    vessels: VesselWithPortName[]\n  ): VesselTotalSummary[] {\n    return vessels.map((vessel) => {\n      const totalQuantity =\n        vessel.dailyCargoDetails?.reduce(\n          (sum: number, cargo: DailyCargoDetail) => {\n            const charge = parseFloat(cargo.quantity || \"0\") || 0;\n            return sum + charge;\n          },\n          0\n        ) || 0;\n\n      return {\n        vesselName: vessel.vesselName,\n        totalQuantity,\n      };\n    });\n  }\n\n  // Function to calculate summary for a specific port\n  const calculatePortSummary = (\n    vessels: VesselWithPortName[],\n    portName: string\n  ): WeeklySummary[] => {\n    const now = new Date();\n    const lastWeekStart = new Date(now);\n    lastWeekStart.setDate(now.getDate() - 7);\n    lastWeekStart.setHours(0, 0, 0, 0);\n    const lastWeekEnd = new Date(now);\n    lastWeekEnd.setHours(23, 59, 59, 999);\n\n    const isLastWeek = (report: VesselWithPortName) => {\n      const createdAt = report.createdAt || report.addedDate;\n      if (!createdAt || !createdAt.seconds) return false;\n      const d = new Date(createdAt.seconds * 1000);\n      return d >= lastWeekStart && d <= lastWeekEnd;\n    };\n\n    const totalVesselsLastWeek = vessels.filter(isLastWeek).length;\n    const totalBerthedVessels = vessels.filter(\n      (r) => r.berthingDateTime\n    ).length;\n    const totalDepartedVessels = vessels.filter(\n      (r) => r.pobDepartureDateTime\n    ).length;\n    const totalVesselsInPort = totalBerthedVessels - totalDepartedVessels;\n\n    const totalLoading = vessels.filter(\n      (r) =>\n        r.operationType.toLowerCase() === \"loading\" &&\n        Boolean(r.clearanceIssuedOn)\n    ).length;\n    const totalUnloading = vessels.filter(\n      (r) =>\n        r.operationType.toLowerCase() === \"unloading\" &&\n        Boolean(r.clearanceIssuedOn)\n    ).length;\n    const totalDepartedLastWeek = vessels.filter(\n      (r) => Boolean(r.pobDepartureDateTime) && isLastWeek(r)\n    ).length;\n\n    const totalDemurrages = calculateTotalDemurrage(vessels).reduce(\n      (sum, { totalDemurrage }) => sum + totalDemurrage,\n      0\n    );\n    const totalCargoHandled = calculateTotalQuantity(vessels).reduce(\n      (sum, { totalQuantity }) => sum + totalQuantity,\n      0\n    );\n\n    const {\n      Container: container,\n      \"Break Bulk\": breakBulk,\n      Project: projectCargo,\n      \"Liquid Bulk\": liquidCargo,\n      \"Dry Bulk\": bulkCargo,\n    } = getCargoSumsByType(vessels);\n\n    const totalAppliedClearance = vessels.filter((r) =>\n      Boolean(r.clearanceIssuedOn)\n    ).length;\n    const totalIssuedClearance = vessels.filter((r) =>\n      Boolean(r.clearanceIssuedOn)\n    ).length;\n\n    return [\n      {\n        description: `Total number of vessels called in ${portName} in the last week`,\n        total: totalVesselsLastWeek,\n      },\n      {\n        description: `Total number of vessels in ${portName} as on date`,\n        total: totalVesselsInPort,\n      },\n      {\n        description: `Total number of vessels loading in ${portName} as on date`,\n        total: totalLoading,\n      },\n      {\n        description: `Total number of vessels unloading in ${portName} as on date`,\n        total: totalUnloading,\n      },\n      {\n        description: `Total vessels departed from ${portName} last week`,\n        total: totalDepartedLastWeek,\n      },\n      {\n        description: `Demurrages collected from ships by ${portName}`,\n        total: totalDemurrages,\n      },\n      {\n        description: `Total cargo handled by ${portName} since start of financial year`,\n        total: totalCargoHandled,\n      },\n      {\n        description: `Cargo handled by ${portName} in the last week`,\n        total: breakBulk + bulkCargo + container + projectCargo + liquidCargo,\n      },\n      { description: `${portName} - Bulk cargo`, total: bulkCargo },\n      { description: `${portName} - Break Bulk`, total: breakBulk },\n      {\n        description: `${portName} - Container (in TEU & MMT)`,\n        total: container,\n      },\n      { description: `${portName} - Project cargo`, total: projectCargo },\n      { description: `${portName} - Liquid cargo`, total: liquidCargo },\n      {\n        description: `Total number of vessels applied for clearance at ${portName}`,\n        total: totalAppliedClearance,\n      },\n      {\n        description: `Total number of clearances issued by ${portName}`,\n        total: totalIssuedClearance,\n      },\n    ];\n  };\n\n  const handleExportAllWeekly = () => {\n    // Use all filtered vessels without filtering by operation type\n    const allReports = filteredVessels;\n\n    // Group vessels by port\n    const vesselsByPort = new Map<string, VesselWithPortName[]>();\n    allReports.forEach((vessel) => {\n      const port = vessel.portName || \"Unknown Port\";\n      if (!vesselsByPort.has(port)) {\n        vesselsByPort.set(port, []);\n      }\n      vesselsByPort.get(port)!.push(vessel);\n    });\n\n    // Calculate summary for all ports combined\n    const allPortsSummary = calculatePortSummary(allReports, \"All Ports\");\n\n    // Calculate summary for each port and sort alphabetically\n    const portSummaries: PortSummaryData[] = [];\n\n    // First add the \"All Ports\" summary\n    portSummaries.push({\n      portName: \"All Ports\",\n      summary: allPortsSummary,\n      vessels: allReports.filter(\n        (vessel) => vessel.clearanceIssuedOn\n      ) as unknown as Record<string, unknown>[], // Only cleared vessels\n    });\n\n    // Then add individual port summaries sorted alphabetically\n    const sortedPortEntries = Array.from(vesselsByPort.entries()).sort(\n      ([a], [b]) => a.localeCompare(b)\n    );\n\n    sortedPortEntries.forEach(([portName, portVessels]) => {\n      const portSummary = calculatePortSummary(portVessels, portName);\n      portSummaries.push({\n        portName,\n        summary: portSummary,\n        vessels: portVessels.filter(\n          (vessel) => vessel.clearanceIssuedOn\n        ) as unknown as Record<string, unknown>[], // Only cleared vessels\n      });\n    });\n\n    console.log({\n      portSummaries,\n    });\n    exportPortWiseSummaryAndReports(portSummaries);\n  };\n\n  const exportToCSV = useCallback(() => {\n    // Generate headers\n    const headers = [\n      // General Information\n      \"Vessel Name\",\n      \"IMO Number\",\n      \"GRT\",\n      \"Port Name\",\n      \"Vessel Owner\",\n      \"Vessel Agent\",\n      \"Entry Date\",\n      \"Sailed Out Date\",\n\n      // Dates and Times\n      \"Arrival Date & Time\",\n      \"Pilot On Board Date & Time\",\n      \"Berthing Date & Time\",\n      \"Pilot Off Board Date & Time\",\n      \"Next Port of Call\",\n\n      // Static Data\n      \"Length Over All (LOA)\",\n      \"Beam\",\n      \"Dead Weight Tonnage (DWT)\",\n      \"Length\",\n      \"Draft Available\",\n\n      // Draft Information\n      \"Arrival Draft Forward\",\n      \"Arrival Draft Aft\",\n      \"Departure Draft Forward\",\n      \"Departure Draft Aft\",\n\n      // Operation Details\n      \"Operation Type\",\n      \"Voyage Type\",\n      \"Operation\",\n      \"Arrival From\",\n      \"Location\",\n\n      // Cargo Information\n      \"Cargo Type\",\n      \"Cargo Name\",\n      \"Cargo Volume\",\n      \"Volume Units\",\n      \"Cargo Quantity\",\n      \"Total Revenue\",\n      \"Status\",\n    ].join(\",\");\n\n    // Generate data rows\n    const rows = vessels.map((vessel) => {\n      const formatValue = (value: string | number | null | undefined) => {\n        if (value === null || value === undefined) return \"\";\n        if (typeof value === \"string\") return `\"${value.replace(/\"/g, '\"\"')}\"`;\n        return value;\n      };\n\n      const formatDateValue = (date: Date | string | null | undefined) => {\n        return date ? formatDateTime(date) : \"\";\n      };\n\n      return [\n        // General Information\n        formatValue(vessel.vesselName),\n        formatValue(vessel.imo),\n        formatValue(vessel.grt),\n        formatValue(vessel.portName),\n        formatValue(vessel.vesselOwner),\n        formatValue(vessel.vesselAgent),\n        formatValue(formatDateValue(vessel.entryDate)),\n        formatValue(formatDateValue(vessel.sailedOutDate)),\n\n        // Dates and Times\n        formatValue(formatDateValue(vessel.arrivalDateTime)),\n        formatValue(formatDateValue(vessel.pobDateTime)),\n        formatValue(formatDateValue(vessel.berthingDateTime)),\n        formatValue(formatDateValue(vessel.pobDepartureDateTime)),\n        formatValue(vessel.nextPortOfCall),\n\n        // Static Data\n        formatValue(vessel.loa),\n        formatValue(vessel.beam),\n        formatValue(vessel.dwt),\n        formatValue(vessel.length),\n        formatValue(vessel.draftAvailable),\n\n        // Draft Information\n        formatValue(vessel.arrivalDraft?.forward),\n        formatValue(vessel.arrivalDraft?.aft),\n        formatValue(vessel.departureDraft?.forward),\n        formatValue(vessel.departureDraft?.aft),\n\n        // Operation Details\n        formatValue(vessel.operationType),\n        formatValue(vessel.voyageType),\n        formatValue(vessel.operation),\n        formatValue(vessel.arrivalFrom),\n        formatValue(vessel.location),\n\n        // Cargo Information\n        formatValue(vessel.cargo?.type),\n        formatValue(vessel.cargo?.name),\n        formatValue(vessel.cargo?.volume),\n        formatValue(vessel.cargo?.units),\n        formatValue(vessel.cargoQuantity),\n        formatValue(\n          vessel.totalRevenue ? formatCurrency(vessel.totalRevenue) : \"\"\n        ),\n        formatValue(vessel.sailedOutDate ? \"Sailed\" : \"Active\"),\n      ].join(\",\");\n    });\n\n    // Combine headers and rows\n    const csvContent = [headers, ...rows].join(\"\\n\");\n\n    // Create and trigger download\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    const timestamp = new Date().toISOString().split(\"T\")[0];\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\n      \"download\",\n      `${portName ? `${portName}_` : \"\"}vessels_${timestamp}.csv`\n    );\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }, [vessels, portName]);\n\n  if (loading) {\n    return <LoadingSpinner message=\"Loading vessels...\" />;\n  }\n\n  if (error) {\n    return <ErrorDisplay message={error} />;\n  }\n\n  return (\n    <Card\n      title={portName ? `Vessels - ${portName}` : \"Vessel List\"}\n      icon={<Ship className=\"h-6 w-6 text-seagreen-600\" />}\n    >\n      <SearchFilter\n        searchTerm={searchTerm}\n        setSearchTerm={setSearchTerm}\n        searchPlaceholder=\"Search by vessel name, IMO, cargo type...\"\n        filterOptions={[\n          { value: \"all\", label: \"All Types\" },\n          { value: \"Import\", label: \"Import\" },\n          { value: \"Export\", label: \"Export\" },\n          { value: \"Coastal\", label: \"Coastal\" },\n        ]}\n        filterValue={filterType}\n        setFilterValue={(value) => setFilterType(value as typeof filterType)}\n        onExport={showExport ? exportToCSV : undefined}\n        showExport={showExport}\n        handleExportAllWeekly={handleExportAllWeekly}\n      />\n\n\n\n      {filteredVessels.length === 0 ? (\n        <div className=\"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-8 rounded text-center\">\n          <Ship className=\"h-12 w-12 mx-auto mb-3 text-gray-400\" />\n          <h3 className=\"text-lg font-medium\">No vessels found</h3>\n          <p className=\"mt-2 text-gray-500\">\n            {searchTerm || filterType !== \"all\"\n              ? \"Try adjusting your search or filter criteria\"\n              : \"No vessels have been added yet\"}\n          </p>\n        </div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Vessel Details\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Arrival Info\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Operation\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Cargo Details\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Revenue\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {paginatedVessels.map((vessel) => (\n                <tr key={vessel.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"flex items-center\">\n                        <Ship className=\"h-5 w-5 text-seagreen-500 mr-2\" />\n                        <span className=\"font-medium text-gray-900\">\n                          {vessel.vesselName || \"N/A\"}\n                        </span>\n                      </div>\n                      <div className=\"mt-1 text-sm text-gray-500\">\n                        <div>IMO: {vessel.imo || \"N/A\"}</div>\n                        <div>GRT: {vessel.grt || \"N/A\"}</div>\n                      </div>\n                    </div>\n                  </td>\n\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"flex items-center text-sm text-gray-900\">\n                        <Calendar className=\"h-4 w-4 text-gray-400 mr-2\" />\n                        {vessel.arrivalDateTime\n                          ? formatDateTime(vessel.arrivalDateTime)\n                          : \"N/A\"}\n                      </div>\n                      <div className=\"mt-1 flex items-center text-sm text-gray-500\">\n                        <Navigation className=\"h-4 w-4 text-gray-400 mr-2\" />\n                        From: {vessel.arrivalFrom || \"N/A\"}\n                      </div>\n                    </div>\n                  </td>\n\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex flex-col space-y-2\">\n                      <StatusBadge\n                        status={vessel.operationType}\n                        label={vessel.operationType || \"N/A\"}\n                      />\n                      <StatusBadge\n                        status={vessel.voyageType}\n                        label={vessel.voyageType || \"N/A\"}\n                      />\n                    </div>\n                  </td>\n\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-start space-x-2\">\n                      <Package className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">\n                          {vessel.cargo?.type || \"N/A\"}\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {vessel.cargo?.name || \"N/A\"}\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {vessel.cargo?.volume\n                            ? `${vessel.cargo.volume} ${vessel.cargo.units}`\n                            : \"N/A\"}\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <DollarSign className=\"h-5 w-5 text-gray-400 mr-1\" />\n                      <span className=\"text-sm font-medium text-gray-900\">\n                        {vessel.totalRevenue\n                          ? formatCurrency(vessel.totalRevenue)\n                          : \"N/A\"}\n                      </span>\n                    </div>\n                  </td>\n\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"small\"\n                      onClick={() => handleViewDetails(vessel.id!)}\n                      icon={<ExternalLink className=\"h-4 w-4\" />}\n                    >\n                      View Details\n                    </Button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n          {filteredVessels.length > 0 && (\n            <div className=\"mt-4 flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6\">\n              <div className=\"flex flex-1 items-center justify-between\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"text-sm text-gray-700\">\n                    Showing{' '}\n                    <span className=\"font-medium\">\n                      {(currentPage - 1) * pageSize + 1}\n                    </span>\n                    {' '}-{' '}\n                    <span className=\"font-medium\">\n                      {Math.min(currentPage * pageSize, filteredVessels.length)}\n                    </span>\n                    {' '}of{' '}\n                    <span className=\"font-medium\">{filteredVessels.length}</span>\n                    {' '}results\n                  </div>\n\n                  <div className=\"flex items-center gap-2\">\n                    <label htmlFor=\"pageSize\" className=\"text-sm text-gray-700\">\n                      Per page:\n                    </label>\n                    <select\n                      id=\"pageSize\"\n                      value={pageSize}\n                      onChange={(e) => handlePageSizeChange(Number(e.target.value))}\n                      className=\"rounded-md border-gray-300 py-1 pl-3 pr-8 text-sm focus:border-seagreen-500 focus:outline-none focus:ring-1 focus:ring-seagreen-500\"\n                    >\n                      <option value={10}>10</option>\n                      <option value={25}>25</option>\n                      <option value={50}>50</option>\n                      <option value={100}>100</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => handlePageChange(1)}\n                    disabled={currentPage === 1}\n                    className=\"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    First\n                  </button>\n                  <button\n                    onClick={() => handlePageChange(currentPage - 1)}\n                    disabled={currentPage === 1}\n                    className=\"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Previous\n                  </button>\n\n                  <div className=\"flex items-center gap-1\">\n                    {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                      let pageNumber;\n                      if (totalPages <= 5) {\n                        pageNumber = i + 1;\n                      } else if (currentPage <= 3) {\n                        pageNumber = i + 1;\n                      } else if (currentPage >= totalPages - 2) {\n                        pageNumber = totalPages - 4 + i;\n                      } else {\n                        pageNumber = currentPage - 2 + i;\n                      }\n\n                      return (\n                        <button\n                          key={pageNumber}\n                          onClick={() => handlePageChange(pageNumber)}\n                          className={`relative inline-flex items-center rounded-md border px-4 py-2 text-sm font-medium ${\n                            currentPage === pageNumber\n                              ? 'border-seagreen-500 bg-seagreen-50 text-seagreen-600 z-10'\n                              : 'border-gray-300 bg-white text-gray-700 hover:bg-gray-50'\n                          }`}\n                        >\n                          {pageNumber}\n                        </button>\n                      );\n                    })}\n                  </div>\n\n                  <button\n                    onClick={() => handlePageChange(currentPage + 1)}\n                    disabled={currentPage === totalPages}\n                    className=\"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Next\n                  </button>\n                  <button\n                    onClick={() => handlePageChange(totalPages)}\n                    disabled={currentPage === totalPages}\n                    className=\"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Last\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </Card>\n  );\n};\n\nexport default memo(VesselList);\n"],"names":["VesselList","vessels","loading","error","portName","showExport","navigate","useNavigate","searchTerm","setSearchTerm","useState","filterType","setFilterType","fromDate","setFromDate","toDate","setToDate","currentPage","setCurrentPage","pageSize","setPageSize","handleViewDetails","useCallback","vesselId","filteredVessels","useMemo","vessel","searchLower","matchesSearch","_a","_b","_c","_e","_d","_f","matchesType","matchesDateRange","arrivalDate","vesselDate","from","to","totalPages","paginatedVessels","startIndex","endIndex","handlePageChange","page","handlePageSizeChange","size","useEffect","getCargoSumsByType","data","cargoSums","entry","type","quantity","calculateTotalDemurrage","totalDemurrage","sum","cargo","charge","calculateTotalQuantity","totalQuantity","calculatePortSummary","now","lastWeekStart","lastWeekEnd","isLastWeek","report","createdAt","d","totalVesselsLastWeek","totalBerthedVessels","r","totalDepartedVessels","totalVesselsInPort","totalLoading","totalUnloading","totalDepartedLastWeek","totalDemurrages","totalCargoHandled","container","breakBulk","projectCargo","liquidCargo","bulkCargo","totalAppliedClearance","totalIssuedClearance","handleExportAllWeekly","allReports","vesselsByPort","port","allPortsSummary","portSummaries","a","b","portVessels","portSummary","exportPortWiseSummaryAndReports","exportToCSV","headers","rows","formatValue","value","formatDateValue","date","formatDateTime","_g","_h","formatCurrency","csvContent","blob","url","link","timestamp","jsx","LoadingSpinner","ErrorDisplay","jsxs","Card","Ship","SearchFilter","Calendar","Navigation","StatusBadge","Package","DollarSign","Button","ExternalLink","e","_","i","pageNumber","memo"],"mappings":"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"}