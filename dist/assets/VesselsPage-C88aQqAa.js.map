{"version":3,"file":"VesselsPage-C88aQqAa.js","sources":["../../src/pages/VesselsPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\nimport { Ship, Calendar } from \"lucide-react\";\nimport { useAuth } from \"../context/AuthContext\";\nimport {\n  fetchPorts,\n  fetchVessels,\n  fetchWeeklyPerformancesWithPort,\n} from \"../services/api\";\nimport { Port, Vessel } from \"../types\";\nimport DashboardLayout from \"../components/layout/DashboardLayout\";\nimport Card from \"../components/ui/Card\";\nimport DateRangePicker from \"../components/ui/DateRangePicker\";\nimport VesselList from \"../components/vessel/VesselList\";\nimport LoadingSpinner from \"../components/ui/LoadingSpinner\";\nimport ErrorDisplay from \"../components/ui/ErrorDisplay\";\nimport { exportWeeklySummaryAndReports } from \"../utils/excelExport\";\nimport Button from \"../components/ui/Button\";\nimport ViewReportModal from \"../components/vessel/ViewReportModal\";\nimport ExcelReportGenerator from \"../components/reports/ExcelReportGenerator\";\nimport { generateExcelReport } from \"../utils/excelReportGenerator\";\n\nconst VesselsPage: React.FC = () => {\n  const { userRole } = useAuth();\n\n  // Tab state\n  const [activeTab, setActiveTab] = useState<\"vessels\" | \"weekly\">(\"vessels\");\n\n  // Vessel Info Tab states\n  const [ports, setPorts] = useState<Port[]>([]);\n  const [vessels, setVessels] = useState<Vessel[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Filter states for vessel tab\n  const [selectedPortId, setSelectedPortId] = useState<string>(\"all\");\n  const [fromDate, setFromDate] = useState<string>(\"\");\n  const [toDate, setToDate] = useState<string>(\"\");\n\n  // Weekly Report Tab states\n  const [selectedReport, setSelectedReport] = useState<any>(null);\n  const [isViewModalOpen, setIsViewModalOpen] = useState(false);\n  const [reports, setReports] = useState<any[]>([]);\n  const [weeklyLoading, setWeeklyLoading] = useState(true);\n  const [weeklyError, setWeeklyError] = useState<string | null>(null);\n  const [weeklySelectedPortId, setWeeklySelectedPortId] =\n    useState<string>(\"all\");\n  const [weeklyFromDate, setWeeklyFromDate] = useState<string>(\"\");\n  const [weeklyToDate, setWeeklyToDate] = useState<string>(\"\");\n\n  // Fetch vessels data\n  useEffect(() => {\n    const fetchVesselData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Fetch all ports first\n        const portsData = await fetchPorts();\n        setPorts(portsData);\n\n        // If a specific port is selected, fetch vessels for that port\n        if (selectedPortId && selectedPortId !== \"all\") {\n          const vesselData = await fetchVessels(selectedPortId);\n          setVessels(vesselData);\n        } else {\n          // Fetch vessels for all ports\n          const allVessels: Vessel[] = [];\n          for (const port of portsData) {\n            if (port.id) {\n              const portVessels = await fetchVessels(port.id);\n              // Add port name to each vessel for display\n              const vesselsWithPortName = portVessels.map((vessel) => ({\n                ...vessel,\n                portName: port.portName,\n              }));\n              allVessels.push(...vesselsWithPortName);\n            }\n          }\n          setVessels(allVessels);\n        }\n      } catch (err) {\n        console.error(\"Error fetching data:\", err);\n        setError(\"Failed to load vessels data\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchVesselData();\n  }, [selectedPortId]);\n\n  // Fetch weekly reports data\n  useEffect(() => {\n    const fetchWeeklyData = async () => {\n      if (activeTab !== \"weekly\") return;\n\n      try {\n        setWeeklyLoading(true);\n        setWeeklyError(null);\n\n        // Fetch ports data if not already available\n        if (ports.length === 0) {\n          const portsData = await fetchPorts();\n          setPorts(portsData);\n        }\n\n        // Fetch weekly reports\n        const allReports = await fetchWeeklyPerformancesWithPort();\n        setReports(allReports);\n      } catch (err) {\n        console.error(\"Error fetching weekly reports:\", err);\n        setWeeklyError(\"Failed to load weekly reports\");\n      } finally {\n        setWeeklyLoading(false);\n      }\n    };\n\n    fetchWeeklyData();\n  }, [activeTab, ports.length]);\n\n  // Filter vessels based on date range\n  const filteredVessels = useMemo(() => {\n    return vessels.filter((vessel) => {\n      if (!fromDate && !toDate) return true;\n\n      const arrivalDate = vessel.arrivalDateTime;\n      if (!arrivalDate) return false;\n\n      let vesselDate: Date;\n\n      if (typeof arrivalDate === 'string') {\n        vesselDate = new Date(arrivalDate);\n      } else if (arrivalDate instanceof Date) {\n        vesselDate = arrivalDate;\n      } else if (arrivalDate && typeof arrivalDate === 'object' && 'seconds' in arrivalDate) {\n        vesselDate = new Date((arrivalDate as any).seconds * 1000);\n      } else {\n        return false;\n      }\n\n      if (isNaN(vesselDate.getTime())) return false;\n\n      const fromDateObj = fromDate ? new Date(fromDate) : null;\n      const toDateObj = toDate ? new Date(toDate) : null;\n\n      if (fromDateObj) {\n        fromDateObj.setHours(0, 0, 0, 0);\n        if (vesselDate < fromDateObj) {\n          return false;\n        }\n      }\n\n      if (toDateObj) {\n        toDateObj.setHours(23, 59, 59, 999);\n        if (vesselDate > toDateObj) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }, [vessels, fromDate, toDate]);\n\n  // Helper function for weekly reports - Calculate cargo sums by type\n  function getCargoSumsByType(data) {\n    const cargoSums = {\n      Container: 0,\n      \"Break Bulk\": 0,\n      Project: 0,\n      \"Liquid Bulk\": 0,\n      \"Dry Bulk\": 0,\n    };\n\n    for (const vessel of data) {\n      if (!vessel.clearanceIssued) continue;\n\n      for (const entry of vessel.dailyData || []) {\n        const type = entry.cargoType;\n        const quantity = parseFloat(entry.totalQuantity);\n\n        if (!isNaN(quantity) && cargoSums.hasOwnProperty(type)) {\n          cargoSums[type] += quantity;\n        }\n      }\n    }\n\n    return cargoSums;\n  }\n\n  // Filter weekly reports based on port and date range\n  const filteredReports = useMemo(() => {\n    return reports.filter((report) => {\n      if (\n        weeklySelectedPortId !== \"all\" &&\n        report.portId !== weeklySelectedPortId\n      )\n        return false;\n      if (!weeklyFromDate && !weeklyToDate) return true;\n      const createdAt = report.createdAt || report.created_at;\n      const reportDate =\n        createdAt && createdAt.seconds\n          ? new Date(createdAt.seconds * 1000)\n          : null;\n      if (!reportDate) return true;\n      const fromDateObj = weeklyFromDate ? new Date(weeklyFromDate) : null;\n      const toDateObj = weeklyToDate ? new Date(weeklyToDate) : null;\n      if (fromDateObj && toDateObj) {\n        toDateObj.setHours(23, 59, 59, 999);\n        return reportDate >= fromDateObj && reportDate <= toDateObj;\n      } else if (fromDateObj) {\n        return reportDate >= fromDateObj;\n      } else if (toDateObj) {\n        toDateObj.setHours(23, 59, 59, 999);\n        return reportDate <= toDateObj;\n      }\n      return true;\n    });\n  }, [reports, weeklySelectedPortId, weeklyFromDate, weeklyToDate]);\n\n  // Calculate weekly summary data\n  const weeklySummary = useMemo(() => {\n    const now = new Date();\n    const lastWeekStart = new Date(now);\n    lastWeekStart.setDate(now.getDate() - 7);\n    lastWeekStart.setHours(0, 0, 0, 0);\n    const lastWeekEnd = new Date(now);\n    lastWeekEnd.setHours(23, 59, 59, 999);\n\n    const isLastWeek = (report: any) => {\n      const createdAt = report.createdAt || report.created_at;\n      if (!createdAt || !createdAt.seconds) return false;\n      const d = new Date(createdAt.seconds * 1000);\n      return d >= lastWeekStart && d <= lastWeekEnd;\n    };\n\n    const totalVesselsLastWeek = filteredReports.filter(isLastWeek).length;\n    // Calculate total vessels in port (berthed - departed)\n    const totalBerthedVessels = filteredReports.filter(\n      (r) => r.berthedDate\n    ).length;\n    const totalDepartedVessels = filteredReports.filter(\n      (r) => r.departureDate\n    ).length;\n    const totalVesselsInPort = totalBerthedVessels - totalDepartedVessels;\n\n    const totalLoading = filteredReports.filter(\n      (r) =>\n        r.purposeOfArrival?.toLowerCase() === \"loading\" &&\n        Boolean(r.clearanceIssued)\n    ).length;\n\n    const totalUnloading = filteredReports.filter(\n      (r) =>\n        r.purposeOfArrival?.toLowerCase() === \"unloading\" &&\n        Boolean(r.clearanceIssued)\n    ).length;\n\n    const totalDepartedLastWeek = filteredReports.filter(\n      (r) => Boolean(r.departureDate) && isLastWeek(r)\n    ).length;\n\n    const totalDemurrages = filteredReports.reduce(\n      (sum, r) => sum + (Number(r.demurragesCollected) || 0),\n      0\n    );\n\n    const totalCargoHandled = filteredReports.reduce(\n      (sum, r) => sum + (Number(r.totalQuantity) || 0),\n      0\n    );\n\n    const {\n      Container: container = 0,\n      \"Break Bulk\": breakBulk = 0,\n      Project: projectCargo = 0,\n      \"Liquid Bulk\": liquidCargo = 0,\n      \"Dry Bulk\": bulkCargo = 0,\n    } = getCargoSumsByType(filteredReports);\n\n    const totalAppliedClearance = filteredReports.filter((r) =>\n      Boolean(r.clearanceIssued)\n    ).length;\n\n    const totalIssuedClearance = filteredReports.filter((r) =>\n      Boolean(r.clearanceIssued)\n    ).length;\n\n    return [\n      {\n        description: \"Total number of vessels called in the last week\",\n        total: totalVesselsLastWeek,\n      },\n      {\n        description: \"Total number of vessels in the port as on date\",\n        total: totalVesselsInPort,\n      },\n      {\n        description: \"Total number of vessels loading in the port as on date\",\n        total: totalLoading,\n      },\n      {\n        description: \"Total number of vessels Unloading in the port as on date\",\n        total: totalUnloading,\n      },\n      {\n        description: \"Total vessels departed last week\",\n        total: totalDepartedLastWeek,\n      },\n      {\n        description: \"Demurrages collected (if any) from the ships by the port\",\n        total: totalDemurrages,\n      },\n      {\n        description:\n          \"Total cargo handled since the start of the financial year\",\n        total: totalCargoHandled,\n      },\n      {\n        description: \"Cargo handled in the last week\",\n        total: breakBulk + bulkCargo + container + projectCargo + liquidCargo,\n      },\n      { description: \"Bulk cargo\", total: bulkCargo },\n      { description: \"Break Bulk\", total: breakBulk },\n      { description: \"Container (in TEU & MMT)\", total: container },\n      { description: \"Project cargo\", total: projectCargo },\n      { description: \"Liquid cargo\", total: liquidCargo },\n      {\n        description: \"Total number of vessels applied for clearance\",\n        total: totalAppliedClearance,\n      },\n      {\n        description: \"Total number of clearances issued\",\n        total: totalIssuedClearance,\n      },\n    ];\n  }, [filteredReports]);\n\n  const handleExportAll = () => {\n    const loadingUnloadingReports = filteredReports.filter(\n      (report) =>\n        report.purposeOfArrival?.toLowerCase() === \"loading\" ||\n        report.purposeOfArrival?.toLowerCase() === \"unloading\"\n    );\n    exportWeeklySummaryAndReports(weeklySummary, loadingUnloadingReports);\n  };\n\n  const handleGenerateWeeklyReport = (portId: string) => {\n    const now = new Date();\n    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n\n    // Determine which vessels to use based on portId\n    let vesselsToFilter = portId === 'all' ? vessels : vessels.filter(v => v.portId === portId);\n\n    const weeklyVessels = vesselsToFilter.filter(vessel => {\n      const arrivalDate = vessel.arrivalDateTime;\n      if (!arrivalDate) return false;\n\n      let vesselDate: Date;\n      if (typeof arrivalDate === 'string') {\n        vesselDate = new Date(arrivalDate);\n      } else if (arrivalDate instanceof Date) {\n        vesselDate = arrivalDate;\n      } else if (arrivalDate && typeof arrivalDate === 'object' && 'seconds' in arrivalDate) {\n        vesselDate = new Date((arrivalDate as any).seconds * 1000);\n      } else {\n        return false;\n      }\n\n      return vesselDate >= weekAgo && vesselDate <= now;\n    });\n\n    const portName = portId !== 'all'\n      ? ports.find(p => p.id === portId)?.portName || 'Selected Port'\n      : 'All Ports';\n\n    generateExcelReport(weeklyVessels, portName, 'weekly', undefined, undefined, portId === 'all');\n  };\n\n  const handleGenerateCustomReport = (fromDateStr: string, toDateStr: string, portId: string) => {\n    const from = new Date(fromDateStr);\n    from.setHours(0, 0, 0, 0);\n    const to = new Date(toDateStr);\n    to.setHours(23, 59, 59, 999);\n\n    // Determine which vessels to use based on portId\n    let vesselsToFilter = portId === 'all' ? vessels : vessels.filter(v => v.portId === portId);\n\n    const customVessels = vesselsToFilter.filter(vessel => {\n      const arrivalDate = vessel.arrivalDateTime;\n      if (!arrivalDate) return false;\n\n      let vesselDate: Date;\n      if (typeof arrivalDate === 'string') {\n        vesselDate = new Date(arrivalDate);\n      } else if (arrivalDate instanceof Date) {\n        vesselDate = arrivalDate;\n      } else if (arrivalDate && typeof arrivalDate === 'object' && 'seconds' in arrivalDate) {\n        vesselDate = new Date((arrivalDate as any).seconds * 1000);\n      } else {\n        return false;\n      }\n\n      return vesselDate >= from && vesselDate <= to;\n    });\n\n    const portName = portId !== 'all'\n      ? ports.find(p => p.id === portId)?.portName || 'Selected Port'\n      : 'All Ports';\n\n    generateExcelReport(customVessels, portName, 'custom', fromDateStr, toDateStr, portId === 'all');\n  };\n\n  const renderTabs = () => (\n    <div className=\"mb-6\">\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\n          <button\n            onClick={() => setActiveTab(\"vessels\")}\n            className={`\n              py-4 px-1 border-b-2 font-medium text-sm\n              ${\n                activeTab === \"vessels\"\n                  ? \"border-seagreen-500 text-seagreen-600\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n              }\n            `}\n          >\n            Vessel Info\n          </button>\n          {/* <button\n            onClick={() => setActiveTab(\"weekly\")}\n            className={`\n              py-4 px-1 border-b-2 font-medium text-sm\n              ${\n                activeTab === \"weekly\"\n                  ? \"border-seagreen-500 text-seagreen-600\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n              }\n            `}\n          >\n            Weekly Reports\n          </button> */}\n        </nav>\n      </div>\n    </div>\n  );\n\n  const renderVesselsTab = () => {\n    if (loading) {\n      return <LoadingSpinner message=\"Loading vessels data...\" />;\n    }\n\n    if (error) {\n      return <ErrorDisplay message={error} />;\n    }\n\n    return (\n      <>\n        <ExcelReportGenerator\n          onGenerateWeekly={handleGenerateWeeklyReport}\n          onGenerateCustom={handleGenerateCustomReport}\n          ports={ports}\n          selectedPortId={selectedPortId}\n          onPortChange={setSelectedPortId}\n          isAdmin={true}\n        />\n\n        <Card\n          title=\"Filters\"\n          icon={<Calendar className=\"h-6 w-6 text-seagreen-600\" />}\n          className=\"mb-6\"\n        >\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Select Port\n              </label>\n              <select\n                value={selectedPortId}\n                onChange={(e) => setSelectedPortId(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n              >\n                <option value=\"all\">All Ports</option>\n                {ports.map((port) => (\n                  <option key={port.id} value={port.id}>\n                    {port.portName}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <DateRangePicker\n                fromDate={fromDate}\n                toDate={toDate}\n                onFromDateChange={setFromDate}\n                onToDateChange={setToDate}\n                fromLabel=\"From Arrival Date\"\n                toLabel=\"To Arrival Date\"\n              />\n            </div>\n          </div>\n\n          {(fromDate || toDate || selectedPortId !== \"all\") && (\n            <div className=\"mt-4 flex items-center justify-between bg-seagreen-50 p-3 rounded-lg\">\n              <p className=\"text-sm text-seagreen-700\">\n                Showing {filteredVessels.length} vessel{filteredVessels.length !== 1 ? 's' : ''}\n                {selectedPortId !== \"all\" &&\n                  ` from ${\n                    ports.find((p) => p.id === selectedPortId)?.portName\n                  }`}\n                {fromDate && toDate\n                  ? ` between ${new Date(\n                      fromDate\n                    ).toLocaleDateString()} and ${new Date(\n                      toDate\n                    ).toLocaleDateString()}`\n                  : fromDate\n                  ? ` from ${new Date(fromDate).toLocaleDateString()}`\n                  : toDate\n                  ? ` until ${new Date(toDate).toLocaleDateString()}`\n                  : \"\"}\n              </p>\n              <button\n                onClick={() => {\n                  setFromDate(\"\");\n                  setToDate(\"\");\n                  setSelectedPortId(\"all\");\n                }}\n                className=\"text-sm text-seagreen-600 hover:text-seagreen-800 font-medium\"\n              >\n                Clear Filters\n              </button>\n            </div>\n          )}\n        </Card>\n\n        <VesselList\n          vessels={filteredVessels}\n          loading={loading}\n          error={error}\n          showExport={true}\n        />\n      </>\n    );\n  };\n\n  // const renderWeeklyTab = () => {\n  //   if (weeklyLoading) {\n  //     return <LoadingSpinner message=\"Loading weekly reports...\" />;\n  //   }\n\n  //   if (weeklyError) {\n  //     return <ErrorDisplay message={weeklyError} />;\n  //   }\n\n  //   return (\n  //     <>\n  //       <Card\n  //         title=\"Filters\"\n  //         icon={<Calendar className=\"h-6 w-6 text-seagreen-600\" />}\n  //         className=\"mb-6\"\n  //       >\n  //         <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n  //           <div>\n  //             <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n  //               Select Port\n  //             </label>\n  //             <select\n  //               value={weeklySelectedPortId}\n  //               onChange={(e) => setWeeklySelectedPortId(e.target.value)}\n  //               className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n  //             >\n  //               <option value=\"all\">All Ports</option>\n  //               {ports.map((port) => (\n  //                 <option key={port.id} value={port.id}>\n  //                   {port.portName}\n  //                 </option>\n  //               ))}\n  //             </select>\n  //           </div>\n  //           <div className=\"md:col-span-2\">\n  //             <DateRangePicker\n  //               fromDate={weeklyFromDate}\n  //               toDate={weeklyToDate}\n  //               onFromDateChange={setWeeklyFromDate}\n  //               onToDateChange={setWeeklyToDate}\n  //               fromLabel=\"From Report Date\"\n  //               toLabel=\"To Report Date\"\n  //             />\n  //           </div>\n  //         </div>\n\n  //         {(weeklyFromDate ||\n  //           weeklyToDate ||\n  //           weeklySelectedPortId !== \"all\") && (\n  //           <div className=\"mt-4 flex items-center justify-between bg-seagreen-50 p-3 rounded-lg\">\n  //             <p className=\"text-sm text-seagreen-700\">\n  //               Showing {filteredReports.length} reports\n  //               {weeklySelectedPortId !== \"all\" &&\n  //                 ` from ${\n  //                   ports.find((p) => p.id === weeklySelectedPortId)?.portName\n  //                 }`}\n  //               {weeklyFromDate && weeklyToDate\n  //                 ? ` between ${new Date(\n  //                     weeklyFromDate\n  //                   ).toLocaleDateString()} and ${new Date(\n  //                     weeklyToDate\n  //                   ).toLocaleDateString()}`\n  //                 : weeklyFromDate\n  //                 ? ` from ${new Date(weeklyFromDate).toLocaleDateString()}`\n  //                 : weeklyToDate\n  //                 ? ` until ${new Date(weeklyToDate).toLocaleDateString()}`\n  //                 : \"\"}\n  //             </p>\n  //             <button\n  //               onClick={() => {\n  //                 setWeeklyFromDate(\"\");\n  //                 setWeeklyToDate(\"\");\n  //                 setWeeklySelectedPortId(\"all\");\n  //               }}\n  //               className=\"text-sm text-seagreen-600 hover:text-seagreen-800 font-medium\"\n  //             >\n  //               Clear Filters\n  //             </button>\n  //           </div>\n  //         )}\n  //       </Card>\n\n  //       <Card\n  //         title=\"Weekly Performance Reports\"\n  //         icon={<Ship className=\"h-6 w-6 text-seagreen-600\" />}\n  //       >\n  //         <div className=\"w-full flex items-center mb-4\">\n  //           <Button\n  //             variant=\"outline\"\n  //             onClick={handleExportAll}\n  //             className=\"ml-auto\"\n  //             icon={\n  //               <svg\n  //                 xmlns=\"http://www.w3.org/2000/svg\"\n  //                 width=\"16\"\n  //                 height=\"16\"\n  //                 viewBox=\"0 0 24 24\"\n  //                 fill=\"none\"\n  //                 stroke=\"currentColor\"\n  //                 strokeWidth=\"2\"\n  //                 strokeLinecap=\"round\"\n  //                 strokeLinejoin=\"round\"\n  //               >\n  //                 <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n  //                 <polyline points=\"7 10 12 15 17 10\"></polyline>\n  //                 <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n  //               </svg>\n  //             }\n  //           >\n  //             Export All\n  //           </Button>\n  //         </div>\n  //         {filteredReports.length === 0 ? (\n  //           <div className=\"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-8 rounded text-center\">\n  //             <Ship className=\"h-12 w-12 mx-auto mb-3 text-gray-400\" />\n  //             <h3 className=\"text-lg font-medium\">No weekly reports found</h3>\n  //             <p className=\"mt-2 text-gray-500\">\n  //               No weekly performance reports have been added yet\n  //             </p>\n  //           </div>\n  //         ) : (\n  //           <div className=\"overflow-x-auto\">\n  //             <table className=\"min-w-full divide-y divide-gray-200\">\n  //               <thead className=\"bg-gray-50 w-full\">\n  //                 <tr>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Vessel Name\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Port\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Agent Name\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Owner Details\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Purpose\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Status\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Cargo Type\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Type of Cargo\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Total Quantity\n  //                   </th>\n  //                   <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n  //                     Actions\n  //                   </th>\n  //                 </tr>\n  //               </thead>\n  //               <tbody className=\"bg-white divide-y divide-gray-200\">\n  //                 {filteredReports.map((report) => (\n  //                   <tr key={report.id} className=\"hover:bg-gray-50\">\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.vesselName || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.port?.portName || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.agentName || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.ownerDetails || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.purposeOfArrival || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.status || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.cargoType || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.typeOfCargo || \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       {report.totalQuantity ?? \"N/A\"}\n  //                     </td>\n  //                     <td className=\"px-6 py-4 whitespace-nowrap\">\n  //                       <Button\n  //                         variant=\"outline\"\n  //                         onClick={() => {\n  //                           setSelectedReport(report);\n  //                           setIsViewModalOpen(true);\n  //                         }}\n  //                       >\n  //                         View Details\n  //                       </Button>\n  //                     </td>\n  //                   </tr>\n  //                 ))}\n  //               </tbody>\n  //             </table>\n  //           </div>\n  //         )}\n  //       </Card>\n  //     </>\n  //   );\n  // };\n\n  return (\n    <DashboardLayout\n      title={activeTab === \"vessels\" ? \"Vessels\" : \"Weekly Reports\"}\n      subtitle={\n        activeTab === \"vessels\"\n          ? \"View and manage all vessels across ports\"\n          : \"Weekly vessel performance reports\"\n      }\n      icon={<Ship className=\"h-6 w-6 text-seagreen-600\" />}\n    >\n      {renderVesselsTab()}\n\n      {/* View Modal for Weekly Reports */}\n      <ViewReportModal\n        report={selectedReport}\n        isOpen={isViewModalOpen}\n        onClose={() => setIsViewModalOpen(false)}\n      />\n    </DashboardLayout>\n  );\n};\n\nexport default VesselsPage;\n"],"names":["VesselsPage","useAuth","activeTab","setActiveTab","useState","ports","setPorts","vessels","setVessels","loading","setLoading","error","setError","selectedPortId","setSelectedPortId","fromDate","setFromDate","toDate","setToDate","selectedReport","setSelectedReport","isViewModalOpen","setIsViewModalOpen","reports","setReports","weeklyLoading","setWeeklyLoading","weeklyError","setWeeklyError","weeklySelectedPortId","setWeeklySelectedPortId","weeklyFromDate","setWeeklyFromDate","weeklyToDate","setWeeklyToDate","useEffect","portsData","fetchPorts","vesselData","fetchVessels","allVessels","port","vesselsWithPortName","vessel","err","allReports","fetchWeeklyPerformancesWithPort","filteredVessels","useMemo","arrivalDate","vesselDate","fromDateObj","toDateObj","getCargoSumsByType","data","cargoSums","entry","type","quantity","filteredReports","report","createdAt","reportDate","now","lastWeekStart","lastWeekEnd","isLastWeek","d","totalVesselsLastWeek","totalBerthedVessels","r","totalDepartedVessels","totalVesselsInPort","totalLoading","_a","totalUnloading","totalDepartedLastWeek","totalDemurrages","sum","totalCargoHandled","container","breakBulk","projectCargo","liquidCargo","bulkCargo","totalAppliedClearance","totalIssuedClearance","handleGenerateWeeklyReport","portId","weekAgo","weeklyVessels","v","portName","p","generateExcelReport","handleGenerateCustomReport","fromDateStr","toDateStr","from","to","customVessels","renderVesselsTab","jsx","LoadingSpinner","ErrorDisplay","jsxs","Fragment","ExcelReportGenerator","Card","Calendar","DateRangePicker","VesselList","DashboardLayout","Ship","ViewReportModal"],"mappings":"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"}