import{h as C,G as P,j as e,C as x,L as Y}from"./index-D2y675Iz.js";import{r}from"./vendor-Cjg16i2H.js";import{B as g,C as A,A as u,t as i,g as E,H as B}from"./ui-D_zlxExx.js";import{D as L}from"./DashboardLayout-D9MFwT0j.js";const O=()=>{const[f,b]=r.useState([]),[t,j]=r.useState(""),[l,p]=r.useState(new Date().getFullYear()),[n,N]=r.useState(new Date().getMonth()+1),[c,d]=r.useState([]),[y,o]=r.useState(!1),m=["January","February","March","April","May","June","July","August","September","October","November","December"],v=Array.from({length:10},(s,a)=>new Date().getFullYear()-a);r.useEffect(()=>{w()},[]),r.useEffect(()=>{t&&l&&n?D():d([])},[t,l,n]);const w=async()=>{try{o(!0);const s=await C();b(s)}catch(s){console.error("Error loading ports:",s),g.error("Failed to load ports")}finally{o(!1)}},D=async()=>{if(t)try{o(!0);const s=await P(t,l,n);d(s)}catch(s){console.error("Error loading files:",s),g.error("Failed to load files")}finally{o(!1)}},S=s=>{const a=document.createElement("a");a.href=s.url,a.download=s.originalFileName,document.body.appendChild(a),a.click(),document.body.removeChild(a)},F=s=>{if(s===0)return"0 Bytes";const a=1024,k=["Bytes","KB","MB","GB"],h=Math.floor(Math.log(s)/Math.log(a));return Math.round(s/Math.pow(a,h)*100)/100+" "+k[h]},M=s=>{if(!s)return"N/A";const a=s.toDate?s.toDate():new Date(s);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)};return e.jsx(L,{title:"View Files",subtitle:"View and download files by Port, Year, and Month (Read-only access)",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{title:"Select Port, Year & Month",icon:e.jsx(A,{className:"h-6 w-6 text-seagreen-600"}),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Port"}),e.jsxs("select",{value:t,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500",children:[e.jsx("option",{value:"",children:"Select Port"}),f.map(s=>e.jsx("option",{value:s.id,children:s.portName},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Year"}),e.jsx("select",{value:l,onChange:s=>p(Number(s.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500",children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Month"}),e.jsx("select",{value:n,onChange:s=>N(Number(s.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-seagreen-500 focus:border-seagreen-500",children:m.map((s,a)=>e.jsx("option",{value:a+1,children:s},a+1))})]})]})}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(u,{className:"h-6 w-6 text-amber-600 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-amber-800",children:"Read-Only Access"}),e.jsx("p",{className:"mt-1 text-sm text-amber-700",children:"You have view and download access only. You cannot upload, edit, or delete files."})]})]})}),t&&e.jsx(x,{title:`Files - ${m[n-1]} ${l}`,icon:e.jsx(i,{className:"h-6 w-6 text-seagreen-600"}),children:y?e.jsx(Y,{message:"Loading files..."}):c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(i,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No files available for this period"})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(i,{className:"h-5 w-5 text-seagreen-600 flex-shrink-0"}),e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:s.originalFileName})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsx("span",{children:F(s.fileSize)}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Uploaded ",M(s.uploadedAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-seagreen-600 hover:bg-seagreen-50 rounded-lg transition-colors",title:"View",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>S(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Download",children:e.jsx(B,{className:"h-5 w-5"})})]})]})},s.id))})}),!t&&e.jsx("div",{className:"bg-seagreen-50 border border-seagreen-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(u,{className:"h-6 w-6 text-seagreen-600 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-seagreen-800",children:"Select Port, Year & Month"}),e.jsx("p",{className:"mt-1 text-sm text-seagreen-700",children:"Please select a port, year, and month to view files."})]})]})})]})})};export{O as default};
//# sourceMappingURL=HODFileView-BjmX9HOb.js.map
