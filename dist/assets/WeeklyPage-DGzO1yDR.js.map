{"version":3,"file":"WeeklyPage-DGzO1yDR.js","sources":["../../src/pages/WeeklyPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\nimport { Ship, Calendar } from \"lucide-react\";\nimport { fetchPorts, fetchWeeklyPerformancesWithPort } from \"../services/api\";\nimport { Port } from \"../types\";\nimport DashboardLayout from \"../components/layout/DashboardLayout\";\nimport Card from \"../components/ui/Card\";\nimport DateRangePicker from \"../components/ui/DateRangePicker\";\nimport LoadingSpinner from \"../components/ui/LoadingSpinner\";\nimport ErrorDisplay from \"../components/ui/ErrorDisplay\";\nimport {\n  exportWeeklySummaryAndReports,\n  WeeklySummary,\n} from \"../utils/excelExport\";\nimport Button from \"../components/ui/Button\";\nimport ViewReportModal from \"../components/vessel/ViewReportModal\";\n\nconst WeeklyPage: React.FC = () => {\n  const [selectedReport, setSelectedReport] = useState<any>(null);\n  const [isViewModalOpen, setIsViewModalOpen] = useState(false);\n  const [ports, setPorts] = useState<Port[]>([]);\n  const [reports, setReports] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedPortId, setSelectedPortId] = useState<string>(\"all\");\n  const [fromDate, setFromDate] = useState<string>(\"\");\n  const [toDate, setToDate] = useState<string>(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const portsData = await fetchPorts();\n        setPorts(portsData);\n        const allReports = await fetchWeeklyPerformancesWithPort();\n        setReports(allReports);\n        console.log({\n          allReports,\n        });\n      } catch (err) {\n        setError(\"Failed to load weekly reports\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Filter reports based on port and date range\n  const filteredReports = useMemo(() => {\n    return reports.filter((report) => {\n      if (selectedPortId !== \"all\" && report.portId !== selectedPortId)\n        return false;\n      if (!fromDate && !toDate) return true;\n      const createdAt = report.createdAt || report.created_at;\n      const reportDate =\n        createdAt && createdAt.seconds\n          ? new Date(createdAt.seconds * 1000)\n          : null;\n      if (!reportDate) return true;\n      const fromDateObj = fromDate ? new Date(fromDate) : null;\n      const toDateObj = toDate ? new Date(toDate) : null;\n      if (fromDateObj && toDateObj) {\n        toDateObj.setHours(23, 59, 59, 999);\n        return reportDate >= fromDateObj && reportDate <= toDateObj;\n      } else if (fromDateObj) {\n        return reportDate >= fromDateObj;\n      } else if (toDateObj) {\n        toDateObj.setHours(23, 59, 59, 999);\n        return reportDate <= toDateObj;\n      }\n      return true;\n    });\n  }, [reports, selectedPortId, fromDate, toDate]);\n\n  function getCargoSumsByType(data) {\n    const cargoSums = {\n      Container: 0,\n      \"Break Bulk\": 0,\n      Project: 0,\n      \"Liquid Bulk\": 0,\n      \"Dry Bulk\": 0,\n    };\n\n    for (const vessel of data) {\n      if (!vessel.clearanceIssued) continue;\n\n      for (const entry of vessel.dailyData) {\n        const type = entry.cargoType;\n        const quantity = parseFloat(entry.totalQuantity);\n\n        if (!isNaN(quantity) && cargoSums.hasOwnProperty(type)) {\n          cargoSums[type] += quantity;\n        }\n      }\n    }\n\n    return cargoSums;\n  }\n\n  // Summary calculation logic (moved inside component)\n  const summary = useMemo(() => {\n    const now = new Date();\n    const lastWeekStart = new Date(now);\n    lastWeekStart.setDate(now.getDate() - 7);\n    lastWeekStart.setHours(0, 0, 0, 0);\n    const lastWeekEnd = new Date(now);\n    lastWeekEnd.setHours(23, 59, 59, 999);\n    const isLastWeek = (report: any) => {\n      const createdAt = report.createdAt || report.created_at;\n      if (!createdAt || !createdAt.seconds) return false;\n      const d = new Date(createdAt.seconds * 1000);\n      return d >= lastWeekStart && d <= lastWeekEnd;\n    };\n    const totalVesselsLastWeek = filteredReports.filter(isLastWeek).length;\n    // Calculate total vessels in port (berthed - departed)\n    const totalBerthedVessels = filteredReports.filter(\n      (r) => r.berthedDate\n    ).length;\n    const totalDepartedVessels = filteredReports.filter(\n      (r) => r.departureDate\n    ).length;\n    const totalVesselsInPort = totalBerthedVessels - totalDepartedVessels;\n\n    const totalLoading = filteredReports.filter(\n      (r) =>\n        r.purposeOfArrival.toLowerCase() === \"loading\" &&\n        Boolean(r.clearanceIssued)\n    ).length;\n    const totalUnloading = filteredReports.filter(\n      (r) =>\n        r.purposeOfArrival.toLowerCase() === \"unloading\" &&\n        Boolean(r.clearanceIssued)\n    ).length;\n    const totalDepartedLastWeek = filteredReports.filter(\n      (r) => Boolean(r.departureDate) && isLastWeek(r)\n    ).length;\n    const totalDemurrages = filteredReports.reduce(\n      (sum, r) => sum + (Number(r.demurragesCollected) || 0),\n      0\n    );\n    const totalCargoHandled = filteredReports.reduce(\n      (sum, r) => sum + (Number(r.totalQuantity) || 0),\n      0\n    );\n\n    const {\n      Container: container,\n      \"Break Bulk\": breakBulk,\n      Project: projectCargo,\n      \"Liquid Bulk\": liquidCargo,\n      \"Dry Bulk\": bulkCargo,\n    } = getCargoSumsByType(filteredReports);\n\n    const totalAppliedClearance = filteredReports.filter((r) =>\n      Boolean(r.clearanceIssued)\n    ).length;\n    const totalIssuedClearance = filteredReports.filter((r) =>\n      Boolean(r.clearanceIssued)\n    ).length;\n\n    return [\n      {\n        description: \"Total number of vessels called in the last week\",\n        total: totalVesselsLastWeek,\n      },\n      {\n        description: \"Total number of vessels in the port as on date\",\n        total: totalVesselsInPort,\n      },\n      {\n        description: \"Total number of vessels loading in the port as on date\",\n        total: totalLoading,\n      },\n      {\n        description: \"Total number of vessels Unloading in the port as on date\",\n        total: totalUnloading,\n      },\n      {\n        description: \"Total vessels departed last week\",\n        total: totalDepartedLastWeek,\n      },\n      {\n        description: \"Demurrages collected (if any) from the ships by the port\",\n        total: totalDemurrages,\n      },\n      {\n        description:\n          \"Total cargo handled since the start of the financial year\",\n        total: totalCargoHandled,\n      },\n      {\n        description: \"Cargo handled in the last week\",\n        total: breakBulk + bulkCargo + container + projectCargo + liquidCargo,\n      },\n      { description: \"Bulk cargo\", total: bulkCargo },\n      { description: \"Break Bulk\", total: breakBulk },\n      { description: \"Container (in TEU & MMT)\", total: container },\n      { description: \"Project cargo\", total: projectCargo },\n      { description: \"Liquid cargo\", total: liquidCargo },\n      {\n        description: \"Total number of vessels applied for clearance\",\n        total: totalAppliedClearance,\n      },\n      {\n        description: \"Total number of clearances issued\",\n        total: totalIssuedClearance,\n      },\n    ];\n  }, [filteredReports]);\n\n  const handleExportAll = () => {\n    const loadingUnloadingReports = filteredReports.filter(\n      (report) =>\n        report.purposeOfArrival.toLowerCase() === \"loading\" ||\n        report.purposeOfArrival.toLowerCase() === \"unloading\"\n    );\n    exportWeeklySummaryAndReports(summary, loadingUnloadingReports);\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Weekly Reports\">\n        <LoadingSpinner message=\"Loading weekly reports...\" />\n      </DashboardLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout title=\"Weekly Reports\">\n        <ErrorDisplay message={error} />\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout\n      title=\"Weekly Reports\"\n      subtitle=\"View and manage all weekly vessel performance reports\"\n      icon={<Ship className=\"h-6 w-6 text-seagreen-600\" />}\n    >\n      <Card\n        title=\"Filters\"\n        icon={<Calendar className=\"h-6 w-6 text-seagreen-600\" />}\n        className=\"mb-6\"\n      >\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Select Port\n            </label>\n            <select\n              value={selectedPortId}\n              onChange={(e) => setSelectedPortId(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n            >\n              <option value=\"all\">All Ports</option>\n              {ports.map((port) => (\n                <option key={port.id} value={port.id}>\n                  {port.portName}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div className=\"md:col-span-2\">\n            <DateRangePicker\n              fromDate={fromDate}\n              toDate={toDate}\n              onFromDateChange={setFromDate}\n              onToDateChange={setToDate}\n              fromLabel=\"From Report Date\"\n              toLabel=\"To Report Date\"\n            />\n          </div>\n        </div>\n\n        {(fromDate || toDate || selectedPortId !== \"all\") && (\n          <div className=\"mt-4 flex items-center justify-between bg-seagreen-50 p-3 rounded-lg\">\n            <p className=\"text-sm text-seagreen-700\">\n              Showing {filteredReports.length} reports\n              {selectedPortId !== \"all\" &&\n                ` from ${ports.find((p) => p.id === selectedPortId)?.portName}`}\n              {fromDate && toDate\n                ? ` between ${new Date(\n                    fromDate\n                  ).toLocaleDateString()} and ${new Date(\n                    toDate\n                  ).toLocaleDateString()}`\n                : fromDate\n                ? ` from ${new Date(fromDate).toLocaleDateString()}`\n                : toDate\n                ? ` until ${new Date(toDate).toLocaleDateString()}`\n                : \"\"}\n            </p>\n            <button\n              onClick={() => {\n                setFromDate(\"\");\n                setToDate(\"\");\n                setSelectedPortId(\"all\");\n              }}\n              className=\"text-sm text-seagreen-600 hover:text-seagreen-800 font-medium\"\n            >\n              Clear Filters\n            </button>\n          </div>\n        )}\n      </Card>\n\n      <Card\n        title=\"Weekly Performance Reports\"\n        icon={<Ship className=\"h-6 w-6 text-seagreen-600\" />}\n      >\n        <div className=\"w-full flex items-center mb-4\">\n          <Button\n            variant=\"outline\"\n            onClick={handleExportAll}\n            className=\"ml-auto\"\n            icon={\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              >\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n                <polyline points=\"7 10 12 15 17 10\"></polyline>\n                <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n              </svg>\n            }\n          >\n            Export All\n          </Button>\n        </div>\n        {filteredReports.length === 0 ? (\n          <div className=\"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-8 rounded text-center\">\n            <Ship className=\"h-12 w-12 mx-auto mb-3 text-gray-400\" />\n            <h3 className=\"text-lg font-medium\">No weekly reports found</h3>\n            <p className=\"mt-2 text-gray-500\">\n              No weekly performance reports have been added yet\n            </p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50 w-full\">\n                <tr>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Vessel Name\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Port\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Agent Name\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Owner Details\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Purpose\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Cargo Type\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Type of Cargo\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Total Quantity\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    DWT\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    LOA\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Berthed Date\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Departure Date\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Demurrages\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Clearance Status\n                  </th>\n                  <th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredReports.map((report) => (\n                  <tr key={report.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.vesselName || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.port?.portName || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.agentName || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.ownerDetails || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.purposeOfArrival || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.status || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.cargoType || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.typeOfCargo || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.totalQuantity ?? \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.dwt || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.loa || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.berthedDate || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.departureDate || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.demurragesCollected ?? \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {report.clearanceIssued || \"N/A\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <Button\n                        variant=\"outline\"\n                        onClick={() => {\n                          setSelectedReport(report);\n                          setIsViewModalOpen(true);\n                        }}\n                      >\n                        View Details\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </Card>\n\n      {/* View Modal */}\n      <ViewReportModal\n        report={selectedReport}\n        isOpen={isViewModalOpen}\n        onClose={() => setIsViewModalOpen(false)}\n      />\n    </DashboardLayout>\n  );\n};\n\nexport default WeeklyPage;\n"],"names":["WeeklyPage","selectedReport","setSelectedReport","useState","isViewModalOpen","setIsViewModalOpen","ports","setPorts","reports","setReports","loading","setLoading","error","setError","selectedPortId","setSelectedPortId","fromDate","setFromDate","toDate","setToDate","useEffect","portsData","fetchPorts","allReports","fetchWeeklyPerformancesWithPort","filteredReports","useMemo","report","createdAt","reportDate","fromDateObj","toDateObj","getCargoSumsByType","data","cargoSums","vessel","entry","type","quantity","summary","now","lastWeekStart","lastWeekEnd","isLastWeek","d","totalVesselsLastWeek","totalBerthedVessels","r","totalDepartedVessels","totalVesselsInPort","totalLoading","totalUnloading","totalDepartedLastWeek","totalDemurrages","sum","totalCargoHandled","container","breakBulk","projectCargo","liquidCargo","bulkCargo","totalAppliedClearance","totalIssuedClearance","handleExportAll","loadingUnloadingReports","exportWeeklySummaryAndReports","jsx","DashboardLayout","LoadingSpinner","ErrorDisplay","jsxs","Ship","Card","Calendar","e","port","DateRangePicker","_a","p","Button","ViewReportModal"],"mappings":"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"}