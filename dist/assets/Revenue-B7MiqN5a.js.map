{"version":3,"file":"Revenue-B7MiqN5a.js","sources":["../../src/pages/Revenue.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { DollarSign, Calendar, Ship, TrendingUp, Anchor } from 'lucide-react';\nimport { fetchPorts, fetchVessels } from '../services/api';\nimport { formatCurrency, formatDate } from '../utils/formatters';\nimport { Port, Vessel } from '../types';\nimport DashboardLayout from '../components/layout/DashboardLayout';\nimport Card from '../components/ui/Card';\nimport Button from '../components/ui/Button';\nimport LoadingSpinner from '../components/ui/LoadingSpinner';\nimport ErrorDisplay from '../components/ui/ErrorDisplay';\nimport SearchFilter from '../components/ui/SearchFilter';\nimport DateRangePicker from '../components/ui/DateRangePicker';\nimport StatusBadge from '../components/ui/StatusBadge';\nimport DataTable from '../components/ui/DataTable';\n\nconst Revenue: React.FC = () => {\n  const { userRole, currentUser } = useAuth();\n  const [ports, setPorts] = useState<Port[]>([]);\n  const [vessels, setVessels] = useState<Vessel[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Filter states\n  const [selectedPortId, setSelectedPortId] = useState<string>('all');\n  const [fromDate, setFromDate] = useState<string>('');\n  const [toDate, setToDate] = useState<string>('');\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [dateFilterType, setDateFilterType] = useState<'arrivalDate' | 'addedDate'>('addedDate');\n  \n  // For port users, we need to get their port ID\n  const [userPortId, setUserPortId] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        // If user is a port, we only need to fetch their vessels\n        if (userRole === 'port' && currentUser) {\n          // Get the port ID for the current user\n          const userDoc = await fetch(`/api/users/${currentUser.uid}`).then(res => res.json());\n          const portId = userDoc.portId;\n          setUserPortId(portId);\n          \n          // Fetch vessels for this port\n          const vesselData = await fetchVessels(portId);\n          setVessels(vesselData);\n        } else {\n          // For admin and HOD, fetch all ports first\n          const portsData = await fetchPorts();\n          setPorts(portsData);\n          \n          // If a port is selected, fetch vessels for that port\n          if (selectedPortId && selectedPortId !== 'all') {\n            const vesselData = await fetchVessels(selectedPortId);\n            setVessels(vesselData);\n          } else {\n            // Fetch vessels for all ports\n            const allVessels: Vessel[] = [];\n            for (const port of portsData) {\n              if (port.id) {\n                const portVessels = await fetchVessels(port.id);\n                // Add port name to each vessel for display\n                const vesselsWithPortName = portVessels.map(vessel => ({\n                  ...vessel,\n                  portName: port.portName\n                }));\n                allVessels.push(...vesselsWithPortName);\n              }\n            }\n            setVessels(allVessels);\n          }\n        }\n      } catch (err) {\n        console.error('Error fetching data:', err);\n        setError('Failed to load revenue data');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [userRole, currentUser, selectedPortId]);\n\n  const filteredVessels = useMemo(() => {\n    return vessels.filter(vessel => {\n      // Filter by search term\n      const matchesSearch = searchTerm === '' || \n        vessel.vesselName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        vessel.imo.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (vessel.cargo?.type && vessel.cargo.type.toLowerCase().includes(searchTerm.toLowerCase())) ||\n        (vessel.portName && vessel.portName.toLowerCase().includes(searchTerm.toLowerCase()));\n      \n      // Filter by date range\n      let matchesDateRange = true;\n      \n      // Determine which date field to use for filtering\n      const dateField = dateFilterType === 'arrivalDate' ? vessel.arrivalDateTime : vessel.addedDate || vessel.createdAt;\n      \n      if (fromDate && dateField) {\n        const fieldDate = new Date(dateField.seconds * 1000);\n        const fromDateObj = new Date(fromDate);\n        matchesDateRange = matchesDateRange && fieldDate >= fromDateObj;\n      }\n      \n      if (toDate && dateField) {\n        const fieldDate = new Date(dateField.seconds * 1000);\n        const toDateObj = new Date(toDate);\n        // Set time to end of day\n        toDateObj.setHours(23, 59, 59, 999);\n        matchesDateRange = matchesDateRange && fieldDate <= toDateObj;\n      }\n      \n      return matchesSearch && matchesDateRange;\n    });\n  }, [vessels, searchTerm, fromDate, toDate, dateFilterType]);\n\n  // Calculate total revenue from filtered vessels\n  const totalRevenue = useMemo(() => {\n    return filteredVessels.reduce((total, vessel) => {\n      if (!vessel.totalRevenue) return total;\n      \n      // Convert totalRevenue to string and handle different formats\n      const revenueStr = String(vessel.totalRevenue);\n      \n      // Remove currency symbols, commas, and other non-numeric characters\n      // Keep decimal points and negative signs\n      const cleanedValue = revenueStr.replace(/[^0-9.-]/g, '');\n      \n      // Parse the cleaned value as a float\n      const revenue = parseFloat(cleanedValue) || 0;\n      \n      return total + revenue;\n    }, 0);\n  }, [filteredVessels]);\n\n  // Calculate last month revenue\n  const lastMonthRevenue = useMemo(() => {\n    const now = new Date();\n    const lastMonthStart = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n    const lastMonthEnd = new Date(now.getFullYear(), now.getMonth(), 0, 23, 59, 59, 999);\n    \n    return filteredVessels.reduce((total, vessel) => {\n      // Get the date from the vessel\n      const dateField = dateFilterType === 'arrivalDate' ? vessel.arrivalDateTime : vessel.addedDate || vessel.createdAt;\n      if (!dateField || !vessel.totalRevenue) return total;\n      \n      const vesselDate = new Date(dateField.seconds * 1000);\n      \n      // Check if the vessel date is within the last month\n      if (vesselDate >= lastMonthStart && vesselDate <= lastMonthEnd) {\n        const revenueStr = String(vessel.totalRevenue);\n        const cleanedValue = revenueStr.replace(/[^0-9.-]/g, '');\n        const revenue = parseFloat(cleanedValue) || 0;\n        return total + revenue;\n      }\n      \n      return total;\n    }, 0);\n  }, [filteredVessels, dateFilterType]);\n\n  // Calculate last year revenue\n  const lastYearRevenue = useMemo(() => {\n    const now = new Date();\n    const lastYearStart = new Date(now.getFullYear() - 1, 0, 1);\n    const lastYearEnd = new Date(now.getFullYear() - 1, 11, 31, 23, 59, 59, 999);\n    \n    return filteredVessels.reduce((total, vessel) => {\n      // Get the date from the vessel\n      const dateField = dateFilterType === 'arrivalDate' ? vessel.arrivalDateTime : vessel.addedDate || vessel.createdAt;\n      if (!dateField || !vessel.totalRevenue) return total;\n      \n      const vesselDate = new Date(dateField.seconds * 1000);\n      \n      // Check if the vessel date is within the last year\n      if (vesselDate >= lastYearStart && vesselDate <= lastYearEnd) {\n        const revenueStr = String(vessel.totalRevenue);\n        const cleanedValue = revenueStr.replace(/[^0-9.-]/g, '');\n        const revenue = parseFloat(cleanedValue) || 0;\n        return total + revenue;\n      }\n      \n      return total;\n    }, 0);\n  }, [filteredVessels, dateFilterType]);\n\n  const columns = [\n    {\n      key: 'vesselName',\n      header: 'Vessel Name',\n      render: (value: string, vessel: Vessel) => (\n        <div className=\"flex items-center\">\n          <Ship className=\"h-5 w-5 text-seagreen-500 mr-2\" />\n          <div className=\"text-sm font-medium text-gray-900\">{value}</div>\n        </div>\n      )\n    },\n    {\n      key: 'portName',\n      header: 'Port Name',\n      render: (_: any, vessel: Vessel) => (\n        <div className=\"flex items-center\">\n          <Anchor className=\"h-5 w-5 text-teal-500 mr-2\" />\n          <div className=\"text-sm text-gray-700\">{vessel.portName || 'N/A'}</div>\n        </div>\n      )\n    },\n    {\n      key: 'imo',\n      header: 'IMO'\n    },\n    {\n      key: 'arrivalDateTime',\n      header: 'Arrival Date',\n      render: (value: any) => value ? formatDate(value) : 'N/A'\n    },\n    {\n      key: 'addedDate',\n      header: 'Added Date',\n      render: (value: any, vessel: Vessel) => {\n        // Use addedDate if available, otherwise fall back to createdAt\n        const dateToUse = value || vessel.createdAt;\n        return dateToUse ? formatDate(dateToUse) : 'N/A';\n      }\n    },\n    {\n      key: 'cargo',\n      header: 'Cargo Type',\n      render: (value: any) => value?.type || 'N/A'\n    },\n    {\n      key: 'operationType',\n      header: 'Operation',\n      render: (value: string) => <StatusBadge status={value} label={value} />\n    },\n    {\n      key: 'voyageType',\n      header: 'Voyage Type',\n      render: (value: string) => <StatusBadge status={value} label={value} />\n    },\n    {\n      key: 'totalRevenue',\n      header: 'Revenue',\n      render: (value: string) => (\n        <span className=\"text-sm font-medium text-gray-900\">\n          {value ? formatCurrency(value) : 'N/A'}\n        </span>\n      )\n    }\n  ];\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Revenue Generated\">\n        <LoadingSpinner message=\"Loading revenue data...\" />\n      </DashboardLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout title=\"Revenue Generated\">\n        <ErrorDisplay message={error} />\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout\n      title=\"Revenue Generated\"\n      subtitle=\"Track and analyze revenue across all vessels\"\n      icon={<DollarSign className=\"h-6 w-6 text-seagreen-600\" />}\n    >\n      <Card \n        title=\"Revenue Filters\" \n        icon={<Calendar className=\"h-6 w-6 text-seagreen-600\" />}\n        className=\"mb-6\"\n      >\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {/* Port Selection - Only for admin and HOD */}\n          {userRole !== 'port' && (\n            <div>\n              <label htmlFor=\"portSelect\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Select Port\n              </label>\n              <select\n                id=\"portSelect\"\n                value={selectedPortId}\n                onChange={(e) => setSelectedPortId(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n              >\n                <option value=\"all\">All Ports</option>\n                {ports.map(port => (\n                  <option key={port.id} value={port.id}>\n                    {port.portName}\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n          \n          {/* Date Filter Type Selection */}\n          <div>\n            <label htmlFor=\"dateFilterType\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Filter By Date Type\n            </label>\n            <select\n              id=\"dateFilterType\"\n              value={dateFilterType}\n              onChange={(e) => setDateFilterType(e.target.value as 'arrivalDate' | 'addedDate')}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n            >\n              <option value=\"addedDate\">Vessel Added Date</option>\n              <option value=\"arrivalDate\">Vessel Arrival Date</option>\n            </select>\n          </div>\n          \n          {/* Date Range Filters */}\n          <div className={userRole !== 'port' ? 'md:col-span-2' : 'md:col-span-2'}>\n            <DateRangePicker\n              fromDate={fromDate}\n              toDate={toDate}\n              onFromDateChange={setFromDate}\n              onToDateChange={setToDate}\n              fromLabel={`From ${dateFilterType === 'addedDate' ? 'Added' : 'Arrival'} Date`}\n              toLabel={`To ${dateFilterType === 'addedDate' ? 'Added' : 'Arrival'} Date`}\n            />\n          </div>\n        </div>\n        \n        <div className=\"mt-6\">\n          <SearchFilter\n            searchTerm={searchTerm}\n            setSearchTerm={setSearchTerm}\n            searchPlaceholder=\"Search vessels or ports...\"\n            showExport={false}\n          />\n        </div>\n        \n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {/* Total Revenue */}\n          <div className=\"bg-seagreen-50 p-4 rounded-lg\">\n            <div className=\"flex items-center mb-2\">\n              <DollarSign className=\"h-5 w-5 text-seagreen-600 mr-2\" />\n              <h3 className=\"text-sm font-medium text-seagreen-800\">Total Revenue</h3>\n            </div>\n            <p className=\"text-2xl font-bold text-seagreen-900\">\n              {formatCurrency(totalRevenue)}\n            </p>\n            <p className=\"text-xs text-seagreen-600 mt-1\">\n              Based on {filteredVessels.length} vessels\n              {fromDate && toDate && (\n                <> â€¢ Filtered by {dateFilterType === 'addedDate' ? 'vessel added date' : 'vessel arrival date'}</>\n              )}\n            </p>\n          </div>\n          \n          {/* Last Month Revenue */}\n          <div className=\"bg-green-50 p-4 rounded-lg\">\n            <div className=\"flex items-center mb-2\">\n              <Calendar className=\"h-5 w-5 text-green-600 mr-2\" />\n              <h3 className=\"text-sm font-medium text-green-800\">Last Month Revenue</h3>\n            </div>\n            <p className=\"text-2xl font-bold text-green-900\">\n              {formatCurrency(lastMonthRevenue)}\n            </p>\n            <p className=\"text-xs text-green-600 mt-1\">\n              {new Date().toLocaleString('default', { month: 'long', year: 'numeric' })}\n            </p>\n          </div>\n          \n          {/* Last Year Revenue */}\n          <div className=\"bg-purple-50 p-4 rounded-lg\">\n            <div className=\"flex items-center mb-2\">\n              <TrendingUp className=\"h-5 w-5 text-purple-600 mr-2\" />\n              <h3 className=\"text-sm font-medium text-purple-800\">Last Year Revenue</h3>\n            </div>\n            <p className=\"text-2xl font-bold text-purple-900\">\n              {formatCurrency(lastYearRevenue)}\n            </p>\n            <p className=\"text-xs text-purple-600 mt-1\">\n              {new Date().getFullYear() - 1}\n            </p>\n          </div>\n        </div>\n      </Card>\n\n      {/* Revenue Table */}\n      <Card\n        title=\"Revenue Data\"\n        icon={<DollarSign className=\"h-6 w-6 text-seagreen-600\" />}\n      >\n        <DataTable\n          columns={columns}\n          data={filteredVessels}\n          loading={loading}\n          error={error}\n          emptyMessage=\"No revenue data found. Try adjusting your filters or add vessels with revenue information.\"\n          emptyIcon={<Ship className=\"h-12 w-12 mx-auto mb-3 text-gray-400\" />}\n          enablePagination={true}\n          itemsPerPage={10}\n        />\n      </Card>\n    </DashboardLayout>\n  );\n};\n\nexport default Revenue;"],"names":["Revenue","userRole","currentUser","useAuth","ports","setPorts","useState","vessels","setVessels","loading","setLoading","error","setError","selectedPortId","setSelectedPortId","fromDate","setFromDate","toDate","setToDate","searchTerm","setSearchTerm","dateFilterType","setDateFilterType","userPortId","setUserPortId","useEffect","portId","res","vesselData","fetchVessels","portsData","fetchPorts","allVessels","port","vesselsWithPortName","vessel","err","filteredVessels","useMemo","matchesSearch","_a","matchesDateRange","dateField","fieldDate","fromDateObj","toDateObj","totalRevenue","total","cleanedValue","revenue","lastMonthRevenue","now","lastMonthStart","lastMonthEnd","vesselDate","lastYearRevenue","lastYearStart","lastYearEnd","columns","value","jsxs","jsx","Ship","_","Anchor","formatDate","dateToUse","StatusBadge","formatCurrency","DashboardLayout","LoadingSpinner","ErrorDisplay","DollarSign","Card","Calendar","e","DateRangePicker","SearchFilter","Fragment","TrendingUp","DataTable"],"mappings":"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"}