{"version":3,"file":"Login-BCaPVc1D.js","sources":["../../src/components/ui/LoginSuccessAnimation.tsx","../../src/pages/Login.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\ninterface LoginSuccessAnimationProps {\n  onComplete: () => void;\n}\n\nconst LoginSuccessAnimation: React.FC<LoginSuccessAnimationProps> = ({ onComplete }) => {\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  const playSuccessSound = () => {\n    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n    const oscillator = audioContext.createOscillator();\n    const gainNode = audioContext.createGain();\n\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContext.destination);\n\n    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);\n    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);\n    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);\n\n    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\n\n    oscillator.start(audioContext.currentTime);\n    oscillator.stop(audioContext.currentTime + 0.5);\n  };\n\n  useEffect(() => {\n    const loadingTimer = setTimeout(() => {\n      setShowSuccess(true);\n      playSuccessSound();\n    }, 1000);\n\n    const completeTimer = setTimeout(() => {\n      onComplete();\n    }, 2000);\n\n    return () => {\n      clearTimeout(loadingTimer);\n      clearTimeout(completeTimer);\n    };\n  }, [onComplete]);\n\n  return (\n    <div className=\"fixed inset-0 bg-white z-50 flex items-center justify-center\">\n      <div className=\"flex flex-col items-center space-y-6\">\n        {!showSuccess ? (\n          <>\n            <div className=\"relative w-24 h-24\">\n              <div className=\"absolute inset-0 border-8 border-seagreen-200 rounded-full\"></div>\n              <div className=\"absolute inset-0 border-8 border-seagreen-600 rounded-full border-t-transparent animate-spin\"></div>\n            </div>\n            <p className=\"text-lg font-medium text-gray-700\">Authenticating...</p>\n          </>\n        ) : (\n          <>\n            <div className=\"relative w-24 h-24\">\n              <div className=\"absolute inset-0 bg-green-100 rounded-full animate-scale-in\"></div>\n              <svg\n                className=\"absolute inset-0 w-24 h-24 text-green-600 animate-checkmark\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={3}\n                  d=\"M5 13l4 4L19 7\"\n                  className=\"checkmark-path\"\n                />\n              </svg>\n            </div>\n            <p className=\"text-lg font-medium text-green-600 animate-fade-in\">Login Successful!</p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LoginSuccessAnimation;\n","import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '../firebase/config';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebase/config';\nimport LoginSuccessAnimation from '../components/ui/LoginSuccessAnimation';\n\nconst Login: React.FC = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showSuccessAnimation, setShowSuccessAnimation] = useState(false);\n  const [redirectPath, setRedirectPath] = useState<string>('');\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { login } = useAuth();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email.trim() || !password.trim()) {\n      setError('Please enter both email and password');\n      return;\n    }\n\n    setError('');\n    setLoading(true);\n\n    try {\n      await login(email, password);\n\n      const userDoc = await getDoc(doc(db, 'users', auth.currentUser!.uid));\n      if (userDoc.exists()) {\n        const userData = userDoc.data();\n        const from = (location.state as any)?.from?.pathname;\n\n        let path = '';\n        switch (userData.role) {\n          case 'admin':\n            path = from && from !== '/login' ? from : '/admin';\n            break;\n          case 'hod':\n            path = from && from !== '/login' ? from : '/hod-dashboard';\n            break;\n          case 'port':\n            path = from && from !== '/login' ? from : '/port-dashboard';\n            break;\n          default:\n            setError('Unknown user role. Please contact administrator.');\n            await auth.signOut();\n            setLoading(false);\n            return;\n        }\n\n        setRedirectPath(path);\n        setShowSuccessAnimation(true);\n      }\n    } catch (error: any) {\n      console.error('Login error:', error);\n      \n      switch (error.code) {\n        case 'auth/invalid-email':\n          setError('Invalid email address format.');\n          break;\n        case 'auth/invalid-credential':\n          setError('Invalid email or password. Please check your credentials and try again.');\n          break;\n        case 'auth/user-disabled':\n          setError('This account has been disabled. Please contact administrator.');\n          break;\n        case 'auth/user-not-found':\n          setError('No account found with this email address.');\n          break;\n        case 'auth/wrong-password':\n          setError('Incorrect password. Please try again.');\n          break;\n        case 'auth/too-many-requests':\n          setError('Too many failed login attempts. Please try again later.');\n          break;\n        case 'auth/network-request-failed':\n          setError('Network error. Please check your internet connection.');\n          break;\n        default:\n          setError('Failed to log in. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAnimationComplete = () => {\n    navigate(redirectPath);\n  };\n\n  if (showSuccessAnimation) {\n    return <LoginSuccessAnimation onComplete={handleAnimationComplete} />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-seagreen-50 via-white to-seagreen-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-8\">\n        <div className=\"flex flex-col items-center space-y-4\">\n          <img \n            src=\"https://apmaritime.in/assets/apmb-B0Lm-J0A.png\"\n            alt=\"APMB Logo\"\n            className=\"h-20 w-20 object-contain\"\n          />\n          <div className=\"text-center\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">Andhra Pradesh Maritime Board (APMB)</h1>\n            <p className=\"mt-2 text-lg font-medium text-seagreen-600\">\n              Import and Export Services (IES)\n            </p>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-50 border-l-4 border-red-500 p-4 rounded-md\">\n            <div className=\"flex\">\n              <div className=\"flex-shrink-0\">\n                <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n              Email Address\n            </label>\n            <div className=\"mt-1\">\n              <input\n                type=\"email\"\n                id=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-seagreen-500 focus:border-transparent transition duration-150\"\n                placeholder=\"Enter your email\"\n                required\n                autoComplete=\"email\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n              Password\n            </label>\n            <div className=\"mt-1\">\n              <input\n                type=\"password\"\n                id=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-seagreen-500 focus:border-transparent transition duration-150\"\n                placeholder=\"Enter your password\"\n                required\n                autoComplete=\"current-password\"\n              />\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-seagreen-600 hover:bg-seagreen-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-seagreen-500 transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {loading ? (\n              <div className=\"flex items-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Signing in...\n              </div>\n            ) : (\n              'Sign In'\n            )}\n          </button>\n        </form>\n\n        <div className=\"text-center\">\n          <p className=\"text-xs text-gray-600\">\n            Â© 2025 Volteo Maritime. All Rights Reserved.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;"],"names":["LoginSuccessAnimation","onComplete","showSuccess","setShowSuccess","useState","playSuccessSound","audioContext","oscillator","gainNode","useEffect","loadingTimer","completeTimer","jsx","jsxs","Fragment","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","showSuccessAnimation","setShowSuccessAnimation","redirectPath","setRedirectPath","navigate","useNavigate","location","useLocation","login","useAuth","handleSubmit","e","userDoc","getDoc","doc","db","auth","userData","from","_b","_a","path","handleAnimationComplete"],"mappings":"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"}