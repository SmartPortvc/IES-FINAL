import{x as I,y as D,a as n,j as e,L as z,C as k,B as G,z as O,A as E,l as R,d as T,D as U}from"./index-DYPp-ivU.js";import{d as W,r as s}from"./vendor-BOKTEpvH.js";import{j as X,P as c,v as H,X as J,w as K,u as Q,B as r}from"./ui-WwCSzw8y.js";import{D as x}from"./DashboardLayout-CKQImzu3.js";import{E as V}from"./ErrorDisplay-CLSu7BDk.js";const ae=()=>{W();const[u,S]=s.useState([]),[A,y]=s.useState(!0),[h,L]=s.useState(""),[o,f]=s.useState(""),[N,j]=s.useState(""),[C,w]=s.useState(!1),[d,l]=s.useState(null),[g,m]=s.useState(""),[b,p]=s.useState("");s.useEffect(()=>{i()},[]);const i=async()=>{try{y(!0);const t=(await I(D(n,"cargoTypes"))).docs.map(v=>({id:v.id,...v.data()}));S(t)}catch(a){console.error("Error fetching cargo types:",a),L("Failed to load cargo types")}finally{y(!1)}},F=async()=>{if(!o.trim()){r.error("Cargo type name is required");return}try{w(!0),await O(D(n,"cargoTypes"),{name:o.trim(),description:N.trim(),createdAt:E()}),r.success("Cargo type added successfully"),f(""),j(""),i()}catch(a){console.error("Error adding cargo type:",a),r.error("Failed to add cargo type")}finally{w(!1)}},B=a=>{l(a.id),m(a.name),p(a.description||"")},q=()=>{l(null),m(""),p("")},M=async a=>{if(!g.trim()){r.error("Cargo type name is required");return}try{await R(T(n,"cargoTypes",a),{name:g.trim(),description:b.trim(),updatedAt:E()}),r.success("Cargo type updated successfully"),l(null),i()}catch(t){console.error("Error updating cargo type:",t),r.error("Failed to update cargo type")}},P=async a=>{if(window.confirm("Are you sure you want to delete this cargo type?"))try{await U(T(n,"cargoTypes",a)),r.success("Cargo type deleted successfully"),i()}catch(t){console.error("Error deleting cargo type:",t),r.error("Failed to delete cargo type")}};return A?e.jsx(x,{title:"Manage Cargo Types",children:e.jsx(z,{message:"Loading cargo types..."})}):h?e.jsx(x,{title:"Manage Cargo Types",children:e.jsx(V,{message:h})}):e.jsxs(x,{title:"Manage Cargo Types",subtitle:"Add and manage cargo types that will be available for ports to select when adding vessels",backLink:"/admin",backLinkText:"Back to Dashboard",icon:e.jsx(c,{className:"h-6 w-6 text-seagreen-600"}),children:[e.jsx(k,{title:"Add New Cargo Type",icon:e.jsx(c,{className:"h-6 w-6 text-seagreen-600"}),className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{htmlFor:"cargoName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Cargo Type Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"cargoName",value:o,onChange:a=>f(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",placeholder:"e.g., Containers, Bulk Cargo",required:!0})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"cargoDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",id:"cargoDescription",value:N,onChange:a=>j(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",placeholder:"Optional description"})]}),e.jsx("div",{className:"md:col-span-1 flex items-end",children:e.jsx(G,{type:"button",onClick:F,disabled:C||!o.trim(),loading:C,icon:e.jsx(X,{className:"h-4 w-4"}),fullWidth:!0,children:"Add Cargo Type"})})]})}),e.jsx(k,{title:"Cargo Types List",icon:e.jsx(c,{className:"h-6 w-6 text-seagreen-600"}),children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No cargo types added yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first cargo type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cargo Type Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d===a.id?e.jsx("input",{type:"text",value:g,onChange:t=>m(t.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500"}):e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d===a.id?e.jsx("input",{type:"text",value:b,onChange:t=>p(t.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500"}):e.jsx("div",{className:"text-sm text-gray-500",children:a.description||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d===a.id?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>M(a.id),className:"text-green-600 hover:text-green-900",title:"Save changes",children:e.jsx(H,{className:"h-5 w-5"})}),e.jsx("button",{onClick:q,className:"text-red-600 hover:text-red-900",title:"Cancel",children:e.jsx(J,{className:"h-5 w-5"})})]}):e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(a),className:"text-seagreen-600 hover:text-seagreen-900",title:"Edit",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>P(a.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Q,{className:"h-5 w-5"})})]})})]},a.id))})]})})})]})};export{ae as default};
//# sourceMappingURL=ManageCargoTypes-DetJ9MyU.js.map
