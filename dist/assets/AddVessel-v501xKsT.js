import{j as e,F as t,h as _e,u as er,t as rr,L as ar,C as q,B as ue,m as sr,n as tr,w as nr}from"./index-DYPp-ivU.js";import{r,d as lr}from"./vendor-BOKTEpvH.js";import{S as o,e as X,R as C,C as I,N as or,P as ce,D as Se,B as F}from"./ui-WwCSzw8y.js";import{E as ir}from"./ErrorDisplay-CLSu7BDk.js";const dr=({portName:u,setPortName:g,berthDetails:m,setBerthDetails:x,length:p,setLength:h,draftAvailable:c,setDraftAvailable:j,vesselName:d,setVesselName:T,vesselOwner:P,setVesselOwner:v,vesselAgent:L,setVesselAgent:N,entryDate:S,setEntryDate:w,sailedOutDate:V,setSailedOutDate:A,imo:R,setImo:O,grt:B,setGrt:y,arrivalDateTime:G,setArrivalDateTime:f,pobDateTime:M,setPobDateTime:n,berthingDateTime:Z,setBerthingDateTime:U,pobDepartureDateTime:_,setPobDepartureDateTime:k,nextPortOfCall:ee,setNextPortOfCall:Q})=>{const[re,W]=r.useState([]),[ae,D]=r.useState(!1);return r.useEffect(()=>{(async()=>{try{const b=await _e();W(b.map(H=>H.portName))}catch(b){console.error("Error loading port suggestions:",b)}})()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{id:"vesselName",label:"Vessel Name",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"vesselName",value:d,onChange:a=>T(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter vessel name"})}),e.jsx(t,{id:"imo",label:"IMO Number",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"imo",value:R,onChange:a=>O(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter IMO number"})}),e.jsx(t,{id:"grt",label:"Gross Registered Tonnage (GRT)",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"grt",value:B,onChange:a=>y(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter GRT"})}),e.jsx(t,{id:"portName",label:"Port Name",required:!0,icon:e.jsx(X,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"portName",value:u,onChange:a=>{g(a.target.value),D(!0)},onFocus:()=>D(!0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter port name",autoComplete:"off"}),ae&&u&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:re.filter(a=>a.toLowerCase().includes(u.toLowerCase())).map((a,b)=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{g(a),D(!1)},onMouseDown:H=>H.preventDefault(),children:a},b))})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Details of Berth / Terminal, vessel is berthed at"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:e.jsx(t,{id:"berthDetails",label:"Berth / Terminal Name",icon:e.jsx(X,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"berthDetails",value:m,onChange:a=>x(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",placeholder:"Enter berth or terminal name"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(t,{id:"length",label:"Length (mts)",required:!0,icon:e.jsx(C,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"length",value:p,onChange:a=>h(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,step:"0.01",min:"0",placeholder:"Enter length"})}),e.jsx(t,{id:"draftAvailable",label:"Draft Available (mts)",icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"draftAvailable",value:c,onChange:a=>j(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",step:"0.01",min:"0",placeholder:"Enter draft"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{id:"vesselOwner",label:"Vessel Owner / Operator",icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"vesselOwner",value:P,onChange:a=>v(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",placeholder:"Enter vessel owner"})}),e.jsx(t,{id:"vesselAgent",label:"Agent Name",icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"vesselAgent",value:L,onChange:a=>N(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",placeholder:"Enter vessel agent"})}),e.jsx(t,{id:"arrivalDateTime",label:"Arrival Date & Time",required:!0,icon:e.jsx(I,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"datetime-local",id:"arrivalDateTime",value:G,onChange:a=>f(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0})}),e.jsx(t,{id:"pobDateTime",label:"Pilot On Board Date & Time",required:!0,icon:e.jsx(I,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"datetime-local",id:"pobDateTime",value:M,onChange:a=>n(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0})}),e.jsx(t,{id:"berthingDateTime",label:"Berthing Date & Time",required:!0,icon:e.jsx(I,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"datetime-local",id:"berthingDateTime",value:Z,onChange:a=>U(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0})}),e.jsx(t,{id:"pobDepartureDateTime",label:"Pilot Off Board Date & Time",icon:e.jsx(I,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"datetime-local",id:"pobDepartureDateTime",value:_,onChange:a=>k(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500"})}),e.jsx(t,{id:"nextPortOfCall",label:"Next Port of Call",icon:e.jsx(or,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"nextPortOfCall",value:ee,onChange:a=>Q(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",placeholder:"Enter next port of call"})}),e.jsx(t,{id:"entryDate",label:"Vessel Entry Date",required:!0,icon:e.jsx(I,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"datetime-local",id:"entryDate",value:S,onChange:a=>w(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0})}),e.jsx(t,{id:"sailedOutDate",label:"Vessel Departure Date",icon:e.jsx(I,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"datetime-local",id:"sailedOutDate",value:V,onChange:a=>A(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",min:S})})]})]})},ur=({loa:u,setLoa:g,beam:m,setBeam:x,dwt:p,setDwt:h})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(t,{id:"loa",label:"Length Over All (LOA) (meters)",required:!0,icon:e.jsx(C,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"loa",value:u,onChange:c=>g(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,step:"0.01",min:"0",placeholder:"Enter LOA"})}),e.jsx(t,{id:"beam",label:"Beam (meters)",icon:e.jsx(C,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"beam",value:m,onChange:c=>x(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",step:"0.01",min:"0",placeholder:"Enter beam"})}),e.jsx(t,{id:"dwt",label:"Dead Weight Tonnage (DWT)",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"dwt",value:p,onChange:c=>h(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,step:"0.01",min:"0",placeholder:"Enter DWT"})})]}),cr=({arrivalDraftFwd:u,setArrivalDraftFwd:g,arrivalDraftAft:m,setArrivalDraftAft:x,departureDraftFwd:p,setDepartureDraftFwd:h,departureDraftAft:c,setDepartureDraftAft:j})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(o,{className:"h-5 w-5 text-seagreen-500 mr-2"}),"Arrival Draft"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{id:"arrivalDraftFwd",label:"Forward (meters)",icon:e.jsx(C,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"arrivalDraftFwd",value:u,onChange:d=>g(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",step:"0.01",min:"0",placeholder:"Forward draft"})}),e.jsx(t,{id:"arrivalDraftAft",label:"Aft (meters)",icon:e.jsx(C,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"arrivalDraftAft",value:m,onChange:d=>x(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",step:"0.01",min:"0",placeholder:"Aft draft"})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(o,{className:"h-5 w-5 text-seagreen-500 mr-2"}),"Departure Draft"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{id:"departureDraftFwd",label:"Forward (meters)",icon:e.jsx(C,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"departureDraftFwd",value:p,onChange:d=>h(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",step:"0.01",min:"0",placeholder:"Forward draft"})}),e.jsx(t,{id:"departureDraftAft",label:"Aft (meters)",icon:e.jsx(C,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"number",id:"departureDraftAft",value:c,onChange:d=>j(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",step:"0.01",min:"0",placeholder:"Aft draft"})})]})]})]}),gr=({operationType:u,setOperationType:g,purposeOfArrivalOther:m,setPurposeOfArrivalOther:x,arrivalFrom:p,setArrivalFrom:h,location:c,setLocation:j,operation:d,setOperation:T,cargoType:P,setCargoType:v,cargoName:L,setCargoName:N,volume:S,setVolume:w,units:V,setUnits:A,cargoTypes:R,cargoQuantity:O,setCargoQuantity:B,totalRevenue:y,setTotalRevenue:G,voyageType:f,setVoyageType:M})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{id:"operationType",label:"Purpose of Arrival",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsxs("select",{id:"operationType",value:u,onChange:n=>g(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,children:[e.jsx("option",{value:"Import",children:"Import"}),e.jsx("option",{value:"Export",children:"Export"}),e.jsx("option",{value:"Coastal",children:"Coastal"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx(t,{id:"voyageType",label:"Voyage Type",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsxs("select",{id:"voyageType",value:f,onChange:n=>M(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,children:[e.jsx("option",{value:"Coastal",children:"Coastal"}),e.jsx("option",{value:"Foreign",children:"Foreign"})]})})]}),u==="Other"&&e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(t,{id:"purposeOfArrivalOther",label:"Specify Purpose of Arrival",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"purposeOfArrivalOther",value:m,onChange:n=>x(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter purpose of arrival"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{id:"arrivalFrom",label:"Arrival From",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"arrivalFrom",value:p,onChange:n=>h(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Origin port/location"})}),e.jsx(t,{id:"location",label:"Coastal State / Country",required:!0,icon:e.jsx(X,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"location",value:c,onChange:n=>j(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter state/country"})}),e.jsx(t,{id:"operation",label:"Operation",required:!0,icon:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsxs("select",{id:"operation",value:d,onChange:n=>T(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,children:[e.jsx("option",{value:"Loading",children:"Loading"}),e.jsx("option",{value:"Unloading",children:"Unloading"}),e.jsx("option",{value:"Transhipment",children:"Transhipment"}),e.jsx("option",{value:"Lighterage",children:"Lighterage"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{id:"cargoType",label:"Cargo Name",required:!0,icon:e.jsx(ce,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsxs("select",{id:"cargoType",value:P,onChange:n=>v(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,children:[e.jsx("option",{value:"",children:"Select cargo type"}),R.map(n=>e.jsx("option",{value:n.name,children:n.name},n.id))]})}),e.jsx(t,{id:"cargoName",label:"Cargo Name / Commodity",required:!0,icon:e.jsx(ce,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"cargoName",value:L,onChange:n=>N(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter cargo name"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{id:"cargoQuantity",label:"Cargo Quantity",required:!0,icon:e.jsx(ce,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"cargoQuantity",value:O,onChange:n=>B(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,placeholder:"Enter cargo quantity"})}),e.jsx(t,{id:"totalRevenue",label:"Total Revenue",icon:e.jsx(Se,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsx("input",{type:"text",id:"totalRevenue",value:y,onChange:n=>G(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",placeholder:"Enter total revenue"})}),e.jsx(t,{id:"volume",label:"Volume Handled",required:!0,icon:e.jsx(Se,{className:"h-5 w-5 text-seagreen-500"}),children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"number",id:"volume",value:S,onChange:n=>w(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",required:!0,step:"0.01",min:"0",placeholder:"Enter volume"})}),e.jsxs("select",{value:V,onChange:n=>A(n.target.value),className:"w-24 px-2 py-2 border border-l-0 border-gray-300 rounded-r-md focus:outline-none focus:ring-2 focus:ring-seagreen-500 bg-gray-50",children:[e.jsx("option",{value:"MT",children:"MT"}),e.jsx("option",{value:"TEUs",children:"TEUs"})]})]})})]})]}),mr=()=>{const u=lr(),{currentUser:g}=er(),{cargoTypes:m,loading:x,error:p}=rr(),[h,c]=r.useState(null),[j,d]=r.useState(""),[T,P]=r.useState(""),[v,L]=r.useState(""),[N,S]=r.useState(""),[w,V]=r.useState(""),[A,R]=r.useState(""),[O,B]=r.useState(""),[y,G]=r.useState(""),[f,M]=r.useState(""),[n,Z]=r.useState(""),[U,_]=r.useState(""),[k,ee]=r.useState(""),[Q,re]=r.useState(""),[W,ae]=r.useState(""),[D,a]=r.useState(""),[b,H]=r.useState(""),[Y,Ae]=r.useState(""),[se,Oe]=r.useState(""),[$,Ee]=r.useState(""),[ge,qe]=r.useState(""),[me,Ie]=r.useState(""),[pe,Fe]=r.useState(""),[he,Pe]=r.useState(""),[te,Le]=r.useState("Import"),[ne,Ve]=r.useState(""),[z,Re]=r.useState(""),[le,Be]=r.useState(""),[xe,Ge]=r.useState("Loading"),[fe,Me]=r.useState(""),[oe,Ue]=r.useState(""),[J,ke]=r.useState(""),[ve,Qe]=r.useState("MT"),[ye,We]=r.useState(""),[be,He]=r.useState(""),[je,Ye]=r.useState("Coastal"),[K,Ne]=r.useState([{date:"",cargoTypeInDetail:"",cargoType:"",quantity:"",demurrageCharges:"",reason:""}]),[we,$e]=r.useState("Loading"),[ie,ze]=r.useState(""),[Je,De]=r.useState(!1),[Ce,Te]=r.useState(null);r.useEffect(()=>{(async()=>{if(g)try{const l=await sr(g.uid);if(l){c(l);const s=await tr(l);s&&d(s.portName)}}catch(l){console.error("Error fetching port information:",l),Te("Failed to load user port information")}})()},[g]);const Ke=()=>{const i=[{value:w,name:"Vessel Name"},{value:n,name:"IMO Number"},{value:U,name:"Gross Registered Tonnage"},{value:v,name:"Length"},{value:y,name:"Entry Date"},{value:Y,name:"Length Over All"},{value:$,name:"Dead Weight Tonnage"},{value:z,name:"Arrival From"},{value:le,name:"Coastal State / Country"},{value:oe,name:"Cargo Name"},{value:J,name:"Volume"}];te==="Other"&&i.push({value:ne,name:"Purpose of Arrival (Other)"});for(const s of i)if(!s.value.trim())return F.error(`${s.name} is required`),!1;const l=[{value:v,name:"Length"},{value:N,name:"Draft Available"},{value:Y,name:"LOA"},{value:se,name:"Beam"},{value:$,name:"DWT"},{value:J,name:"Volume"}];for(const s of l)if(s.value&&isNaN(Number(s.value)))return F.error(`${s.name} must be a number`),!1;return f&&new Date(f)<new Date(y)?(F.error("Sailed Out Date cannot be before Entry Date"),!1):!0},Xe=()=>{Ne([...K,{date:"",cargoTypeInDetail:"",cargoType:"",quantity:"",demurrageCharges:"",reason:""}])},E=(i,l,s)=>{const de=[...K];de[i]={...de[i],[l]:s},Ne(de)},Ze=async i=>{if(i.preventDefault(),!h){F.error("Port ID not found. Please contact support.");return}if(Ke()){De(!0);try{const l={portId:h,berthDetails:T||"",length:Number(v),draftAvailable:Number(N),vesselName:w,vesselOwner:A,vesselAgent:O,entryDate:new Date(y),sailedOutDate:f?new Date(f):null,imo:n,grt:U,arrivalDateTime:k?new Date(k):null,pobDateTime:Q?new Date(Q):null,berthingDateTime:W?new Date(W):null,pobDepartureDateTime:D?new Date(D):null,nextPortOfCall:b,cargoQuantity:ye,totalRevenue:be,voyageType:je,arrivalFrom:z,clearanceIssuedOn:ie?new Date(ie):null,loa:Number(Y),beam:Number(se),dwt:Number($),arrivalDraft:{forward:Number(ge),aft:Number(me)},departureDraft:{forward:Number(pe),aft:Number(he)},operationType:te,purposeOfArrivalOther:ne,fromTo:z,location:le,operation:xe,cargo:{type:fe,name:oe,volume:Number(J),units:ve},dailyCargoDetails:K.map(s=>({date:s.date?new Date(s.date):null,cargoTypeInDetail:s.cargoTypeInDetail,cargoType:s.cargoType,quantity:s.quantity,demurrageCharges:s.demurrageCharges,reason:s.reason})),vesselStatus:we,createdAt:new Date,addedDate:new Date};await nr(l),F.success("Vessel added successfully!"),u("/port-dashboard")}catch(l){console.error("Error adding vessel:",l);const s=l instanceof Error?l.message:"Failed to add vessel. Please try again.";F.error(s),Te(s)}finally{De(!1)}}};return Ce||p?e.jsx(ir,{message:Ce||p||"An error occurred"}):x?e.jsx(ar,{message:"Loading cargo types..."}):e.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[e.jsx(q,{title:"General Vessel Information",icon:e.jsx(o,{className:"h-6 w-6 text-seagreen-600"}),children:e.jsx(dr,{portName:j,setPortName:d,berthDetails:T,setBerthDetails:P,length:v,setLength:L,draftAvailable:N,setDraftAvailable:S,vesselName:w,setVesselName:V,vesselOwner:A,setVesselOwner:R,vesselAgent:O,setVesselAgent:B,entryDate:y,setEntryDate:G,sailedOutDate:f,setSailedOutDate:M,imo:n,setImo:Z,grt:U,setGrt:_,arrivalDateTime:k,setArrivalDateTime:ee,pobDateTime:Q,setPobDateTime:re,berthingDateTime:W,setBerthingDateTime:ae,pobDepartureDateTime:D,setPobDepartureDateTime:a,nextPortOfCall:b,setNextPortOfCall:H})}),e.jsx(q,{title:"Vessel Static Data",icon:e.jsx(X,{className:"h-6 w-6 text-seagreen-600"}),children:e.jsx(ur,{loa:Y,setLoa:Ae,beam:se,setBeam:Oe,dwt:$,setDwt:Ee})}),e.jsx(q,{title:"Vessel Status & Clearance",icon:e.jsx(o,{className:"h-6 w-6 text-seagreen-600"}),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1",children:["Vessel Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:we,onChange:i=>$e(i.target.value),required:!0,children:[e.jsx("option",{value:"Loading",children:"Loading"}),e.jsx("option",{value:"Discharging",children:"Discharging"}),e.jsx("option",{value:"Completed",children:"Completed"})]}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Clearance Issued On"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:ie,onChange:i=>ze(i.target.value)}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(o,{className:"h-5 w-5 text-seagreen-500"})})]})]})]})}),e.jsx(q,{title:"Draft Information",icon:e.jsx(o,{className:"h-6 w-6 text-seagreen-600"}),children:e.jsx(cr,{arrivalDraftFwd:ge,setArrivalDraftFwd:qe,arrivalDraftAft:me,setArrivalDraftAft:Ie,departureDraftFwd:pe,setDepartureDraftFwd:Fe,departureDraftAft:he,setDepartureDraftAft:Pe})}),e.jsx(q,{title:"Operation Details",icon:e.jsx(o,{className:"h-6 w-6 text-seagreen-600"}),children:e.jsx(gr,{operationType:te,setOperationType:Le,purposeOfArrivalOther:ne,setPurposeOfArrivalOther:Ve,arrivalFrom:z,setArrivalFrom:Re,location:le,setLocation:Be,operation:xe,setOperation:Ge,cargoType:fe,setCargoType:Me,cargoName:oe,setCargoName:Ue,volume:J,setVolume:ke,units:ve,setUnits:Qe,cargoTypes:m,cargoQuantity:ye,setCargoQuantity:We,totalRevenue:be,setTotalRevenue:He,voyageType:je,setVoyageType:Ye})}),e.jsxs(q,{title:"Daily Cargo Details",icon:e.jsx(o,{className:"h-6 w-6 text-seagreen-600"}),children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2",children:"DATE"}),e.jsx("th",{className:"border px-4 py-2",children:"TYPE OF CARGO IN DETAIL"}),e.jsx("th",{className:"border px-4 py-2",children:"TYPE OF CARGO"}),e.jsx("th",{className:"border px-4 py-2",children:"QUANTITY"}),e.jsx("th",{className:"border px-4 py-2",children:"DEMARAGE CHARGES COLLECTED FROM THE SHIP IN RS."}),e.jsx("th",{className:"border px-4 py-2",children:"REASON"})]})}),e.jsx("tbody",{children:K.map((i,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"date",className:"w-full pl-3 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:i.date,onChange:s=>E(l,"date",s.target.value)})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsxs("select",{className:"w-full pl-3 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:i.cargoTypeInDetail,onChange:s=>E(l,"cargoTypeInDetail",s.target.value),children:[e.jsx("option",{value:"",children:"Select cargo type"}),m.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"text",className:"w-full pl-3 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:i.cargoType,onChange:s=>E(l,"cargoType",s.target.value),placeholder:"Enter type"})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"text",className:"w-full pl-3 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:i.quantity,onChange:s=>E(l,"quantity",s.target.value),placeholder:"Enter quantity"})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"text",className:"w-full pl-3 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:i.demurrageCharges,onChange:s=>E(l,"demurrageCharges",s.target.value),placeholder:"Enter demurrages"})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"text",className:"w-full pl-3 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500",value:i.reason,onChange:s=>E(l,"reason",s.target.value),placeholder:"Enter Reason"})})]},l))})]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(ue,{type:"button",onClick:Xe,icon:e.jsx("span",{className:"mr-2",children:"+"}),children:"Add Row"})})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(ue,{variant:"outline",onClick:()=>u("/port-dashboard"),children:"Cancel"}),e.jsx(ue,{type:"submit",loading:Je,icon:e.jsx(o,{className:"h-4 w-4"}),children:"Add Vessel"})]})]})},vr=()=>e.jsx("div",{className:"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"https://apmaritime.in/assets/apmb-B0Lm-J0A.png",alt:"APMB Logo",className:"h-32 w-32 mx-auto mb-6 object-contain rounded-2xl shadow-lg"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Add New Vessel"}),e.jsx("p",{className:"mt-2 text-xl font-medium text-seagreen-600",children:"Enter vessel details and operation information"})]}),e.jsx(mr,{})]})});export{vr as default};
//# sourceMappingURL=AddVessel-v501xKsT.js.map
