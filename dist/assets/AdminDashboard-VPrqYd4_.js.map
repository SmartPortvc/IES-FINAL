{"version":3,"file":"AdminDashboard-VPrqYd4_.js","sources":["../../src/components/forms/InviteForm.tsx","../../src/components/port/PortInviteForm.tsx","../../src/components/hod/HodInviteForm.tsx","../../src/pages/AdminDashboard.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Mail, Send, AlertCircle, ExternalLink, CheckCircle, Copy, Info } from 'lucide-react';\nimport { toast } from 'react-toastify';\nimport Card from '../ui/Card';\nimport Button from '../ui/Button';\nimport FormField from '../ui/FormField';\nimport { validateEmail } from '../../utils/emailService';\n\ninterface InviteFormProps {\n  title: string;\n  onSubmit: (data: any) => Promise<{ id: string; link: string; emailSent: boolean }>;\n  fields: {\n    name: string;\n    label: string;\n    type: string;\n    required?: boolean;\n    helpText?: string;\n  }[];\n  successMessage: string;\n  emailSentMessage: string;\n  linkValidityDays?: number;\n}\n\nconst InviteForm: React.FC<InviteFormProps> = ({\n  title,\n  onSubmit,\n  fields,\n  successMessage,\n  emailSentMessage,\n  linkValidityDays = 7\n}) => {\n  const [formValues, setFormValues] = useState<Record<string, string>>({});\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n  const [registrationLink, setRegistrationLink] = useState('');\n  const [emailSent, setEmailSent] = useState(false);\n  const [showLinkCopied, setShowLinkCopied] = useState(false);\n  const [invitedEmail, setInvitedEmail] = useState('');\n  const formRefs = useRef<Record<string, HTMLInputElement | null>>({});\n\n  const handleInputChange = (name: string, value: string) => {\n    setFormValues(prev => ({ ...prev, [name]: value }));\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text).then(\n      () => {\n        setShowLinkCopied(true);\n        toast.success('Registration link copied to clipboard!');\n        setTimeout(() => setShowLinkCopied(false), 3000);\n      },\n      (err) => {\n        console.error('Could not copy text: ', err);\n        toast.error('Failed to copy link');\n      }\n    );\n  };\n\n  const validateForm = () => {\n    // Check required fields\n    for (const field of fields) {\n      if (field.required && !formValues[field.name]) {\n        setError(`${field.label} is required`);\n        toast.error(`${field.label} is required`);\n        return false;\n      }\n    }\n\n    // Validate email if present\n    const emailField = fields.find(f => f.type === 'email');\n    if (emailField && formValues[emailField.name]) {\n      if (!validateEmail(formValues[emailField.name])) {\n        setError('Please enter a valid email address');\n        toast.error('Please enter a valid email address');\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    setSuccess(false);\n    setRegistrationLink('');\n    setEmailSent(false);\n\n    // Find email field\n    const emailField = fields.find(f => f.type === 'email');\n    if (emailField) {\n      setInvitedEmail(formValues[emailField.name]);\n    }\n\n    try {\n      // Submit form data\n      const result = await onSubmit(formValues);\n      \n      // Set the registration link for display\n      setRegistrationLink(result.link);\n      setEmailSent(result.emailSent);\n      \n      // Always show success and registration link, even if email fails\n      setSuccess(true);\n      \n      // Reset form\n      setFormValues({});\n    } catch (err: any) {\n      console.error('Error submitting form:', err);\n      setError(`Failed: ${err.message || 'Unknown error'}`);\n      toast.error(`Failed. Please try again.`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Card title={title} icon={<Mail className=\"h-6 w-6 text-seagreen-600\" />}>\n      {success && (\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\n          <div className=\"flex items-start\">\n            <CheckCircle className=\"h-5 w-5 text-green-600 mr-2 mt-0.5\" />\n            <div>\n              <p className=\"font-medium\">{successMessage}</p>\n              <p className=\"mt-1 text-sm\">\n                {emailSent \n                  ? `${emailSentMessage} ${invitedEmail}.`\n                  : \"Please share the registration link.\"}\n              </p>\n              \n              {registrationLink && (\n                <div className=\"mt-4 p-3 bg-white rounded border border-gray-200\">\n                  <p className=\"text-sm font-medium text-gray-800 mb-1\">Registration Link:</p>\n                  <div className=\"flex items-center\">\n                    <input \n                      type=\"text\" \n                      value={registrationLink} \n                      readOnly \n                      className=\"flex-1 text-sm p-2 border border-gray-300 rounded-l-md focus:outline-none\"\n                    />\n                    <button\n                      onClick={() => copyToClipboard(registrationLink)}\n                      className=\"bg-gray-200 text-gray-700 p-2 hover:bg-gray-300\"\n                      title=\"Copy to clipboard\"\n                    >\n                      <Copy className=\"h-5 w-5\" />\n                    </button>\n                    <a \n                      href={registrationLink} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\" \n                      className=\"bg-seagreen-600 text-white p-2 rounded-r-md hover:bg-seagreen-700\"\n                      title=\"Open link\"\n                    >\n                      <ExternalLink className=\"h-5 w-5\" />\n                    </a>\n                  </div>\n                  {showLinkCopied && (\n                    <p className=\"text-xs text-green-600 mt-1\">Link copied to clipboard!</p>\n                  )}\n                  <p className=\"mt-2 text-xs text-gray-500\">\n                    This link will be valid for {linkValidityDays} days.\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4\">\n          <div className=\"flex\">\n            <AlertCircle className=\"h-5 w-5 text-yellow-600 mr-2\" />\n            <span>{error}</span>\n          </div>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"space-y-4\">\n          {fields.map((field) => (\n            <FormField\n              key={field.name}\n              id={field.name}\n              label={field.label}\n              required={field.required}\n              helpText={field.helpText}\n              icon={field.helpText ? <Info className=\"h-3 w-3 text-seagreen-600\" /> : undefined}\n            >\n              <input\n                type={field.type}\n                id={field.name}\n                ref={(el) => formRefs.current[field.name] = el}\n                value={formValues[field.name] || ''}\n                onChange={(e) => handleInputChange(field.name, e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-seagreen-500\"\n                required={field.required}\n              />\n            </FormField>\n          ))}\n        </div>\n\n        <div className=\"mt-6\">\n          <Button\n            type=\"submit\"\n            loading={loading}\n            icon={<Send className=\"h-5 w-5\" />}\n            fullWidth\n          >\n            Send Invite\n          </Button>\n        </div>\n      </form>\n    </Card>\n  );\n};\n\nexport default InviteForm;","import React from 'react';\nimport { createPortInvitation } from '../../services/api';\nimport { sendPortInvitation } from '../../utils/emailService';\nimport InviteForm from '../forms/InviteForm';\n\nconst PortInviteForm: React.FC = () => {\n  const handleSubmit = async (data: { portName: string; email: string }) => {\n    // Create port invitation in Firestore\n    const portId = await createPortInvitation(data.portName, data.email);\n    \n    // Set the registration link for display\n    const link = `${window.location.origin}/port-registration/${portId}`;\n    \n    let emailSent = false;\n    \n    // Send invitation email with robust error handling\n    try {\n      await sendPortInvitation(portId, data.portName, data.email);\n      emailSent = true;\n    } catch (emailError: any) {\n      console.error('Email sending error:', emailError);\n      // We'll handle this in the UI by showing the manual link\n    }\n    \n    return { id: portId, link, emailSent };\n  };\n\n  return (\n    <InviteForm\n      title=\"Invite New Port\"\n      onSubmit={handleSubmit}\n      fields={[\n        {\n          name: 'portName',\n          label: 'Port Name',\n          type: 'text',\n          required: true\n        },\n        {\n          name: 'email',\n          label: 'Port Email',\n          type: 'email',\n          required: true,\n          helpText: 'The invitation will be sent to this email address'\n        }\n      ]}\n      successMessage=\"Port invitation created successfully!\"\n      emailSentMessage=\"An email with registration instructions has been sent to\"\n    />\n  );\n};\n\nexport default PortInviteForm;","import React from 'react';\nimport { createHodInvitation } from '../../services/api';\nimport { sendHodInvitation } from '../../utils/emailService';\nimport InviteForm from '../forms/InviteForm';\n\nconst HodInviteForm: React.FC = () => {\n  const handleSubmit = async (data: { email: string }) => {\n    // Create HOD invitation in Firestore\n    const hodId = await createHodInvitation(data.email);\n    \n    // Set the registration link for display\n    const link = `${window.location.origin}/hod-registration/${hodId}`;\n    \n    let emailSent = false;\n    \n    // Send invitation email with robust error handling\n    try {\n      await sendHodInvitation(hodId, data.email);\n      emailSent = true;\n    } catch (emailError: any) {\n      console.error('Email sending error:', emailError);\n      // We'll handle this in the UI by showing the manual link\n    }\n    \n    return { id: hodId, link, emailSent };\n  };\n\n  return (\n    <InviteForm\n      title=\"Invite Head of Department (HOD)\"\n      onSubmit={handleSubmit}\n      fields={[\n        {\n          name: 'email',\n          label: 'HOD Email',\n          type: 'email',\n          required: true,\n          helpText: 'The invitation will be sent to this email address'\n        }\n      ]}\n      successMessage=\"HOD invitation created successfully!\"\n      emailSentMessage=\"An email with registration instructions has been sent to\"\n    />\n  );\n};\n\nexport default HodInviteForm;","import React, { useState, useEffect } from 'react';\nimport { AlertCircle } from 'lucide-react';\nimport { useAuth } from '../context/AuthContext';\nimport DashboardLayout from '../components/layout/DashboardLayout';\nimport PortInviteForm from '../components/port/PortInviteForm';\nimport PortList from '../components/port/PortList';\nimport HodInviteForm from '../components/hod/HodInviteForm';\nimport HodList from '../components/hod/HodList';\nimport { fetchPorts, fetchHods } from '../services/api';\nimport { Port, HOD } from '../types';\n\nconst AdminDashboard: React.FC = () => {\n  // Set initial active item based on user role\n  const { userRole } = useAuth();\n  const isHod = userRole === 'hod';\n  const initialActiveItem = isHod ? 'details' : 'invite';\n  \n  const [activeItem, setActiveItem] = useState(initialActiveItem);\n  \n  // State for data\n  const [ports, setPorts] = useState<Port[]>([]);\n  const [hods, setHods] = useState<HOD[]>([]);\n  const [loadingPorts, setLoadingPorts] = useState(true);\n  const [loadingHods, setLoadingHods] = useState(true);\n  const [portsError, setPortsError] = useState<string | null>(null);\n  const [hodsError, setHodsError] = useState<string | null>(null);\n\n  // Fetch ports and HODs data\n  useEffect(() => {\n    const loadData = async () => {\n      // Fetch ports\n      try {\n        setLoadingPorts(true);\n        const portsData = await fetchPorts();\n        setPorts(portsData);\n      } catch (error) {\n        console.error('Error fetching ports:', error);\n        setPortsError('Failed to load port details');\n      } finally {\n        setLoadingPorts(false);\n      }\n      \n      // Fetch HODs\n      try {\n        setLoadingHods(true);\n        const hodsData = await fetchHods();\n        setHods(hodsData);\n      } catch (error) {\n        console.error('Error fetching HODs:', error);\n        setHodsError('Failed to load HOD details');\n      } finally {\n        setLoadingHods(false);\n      }\n    };\n    \n    loadData();\n  }, []);\n\n  return (\n    <DashboardLayout\n      title=\"Admin Dashboard\"\n      subtitle={isHod ? \"View port details and information (read-only access)\" : \"Manage ports and view their details\"}\n      activeItem={activeItem}\n      setActiveItem={setActiveItem}\n    >\n      {isHod && (\n        <div className=\"mb-6 bg-seagreen-50 border border-seagreen-200 rounded-lg p-4\">\n          <div className=\"flex\">\n            <AlertCircle className=\"h-6 w-6 text-seagreen-600 mr-3 flex-shrink-0\" />\n            <div>\n              <h3 className=\"font-medium text-seagreen-800\">HOD View-Only Access</h3>\n              <p className=\"mt-1 text-sm text-seagreen-700\">\n                You are logged in as a Head of Department with view-only access.\n                You can view port details and HOD information but cannot make any changes.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {activeItem === 'invite' && !isHod && <PortInviteForm />}\n      {activeItem === 'details' && <PortList ports={ports} loading={loadingPorts} error={portsError} />}\n      {activeItem === 'inviteHod' && !isHod && <HodInviteForm />}\n      {activeItem === 'hodList' && <HodList hods={hods} loading={loadingHods} error={hodsError} />}\n    </DashboardLayout>\n  );\n};\n\nexport default AdminDashboard;"],"names":["InviteForm","title","onSubmit","fields","successMessage","emailSentMessage","linkValidityDays","formValues","setFormValues","useState","loading","setLoading","success","setSuccess","error","setError","registrationLink","setRegistrationLink","emailSent","setEmailSent","showLinkCopied","setShowLinkCopied","invitedEmail","setInvitedEmail","formRefs","useRef","handleInputChange","name","value","prev","copyToClipboard","text","toast","err","validateForm","field","emailField","f","validateEmail","handleSubmit","e","result","jsxs","Card","Mail","jsx","CheckCircle","Copy","ExternalLink","AlertCircle","FormField","Info","el","Button","Send","PortInviteForm","data","portId","createPortInvitation","link","sendPortInvitation","emailError","HodInviteForm","hodId","createHodInvitation","sendHodInvitation","AdminDashboard","userRole","useAuth","isHod","initialActiveItem","activeItem","setActiveItem","ports","setPorts","hods","setHods","loadingPorts","setLoadingPorts","loadingHods","setLoadingHods","portsError","setPortsError","hodsError","setHodsError","useEffect","portsData","fetchPorts","hodsData","fetchHods","DashboardLayout","PortList","HodList"],"mappings":"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"}